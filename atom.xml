<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Anker`s Blog</title>
  
  <subtitle>十里平湖霜满天,寸寸青丝愁华年</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-10-11T07:28:57.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>AnkerLi</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>api接口定义</title>
    <link href="http://yoursite.com/2018/10/10/api%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89/"/>
    <id>http://yoursite.com/2018/10/10/api接口定义/</id>
    <published>2018-10-10T06:42:15.000Z</published>
    <updated>2018-10-11T07:28:57.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-REST-API"><a href="#1-REST-API" class="headerlink" title="1. REST API"></a>1. REST API</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Method          URI                     Action      Comment</span><br><span class="line">post            api/login               store       登录</span><br><span class="line">post            api/logout              logout      退出登录</span><br><span class="line"></span><br><span class="line">get             api/users               index       获取用户列表</span><br><span class="line">get             api/users/&#123;userid&#125;      show        获取单个用户信息</span><br><span class="line">get             api/users/&#123;userid&#125;/edit edit        编辑用户</span><br><span class="line">put             api/users/&#123;userid&#125;      update      更新用户</span><br><span class="line">delete          api/users/&#123;userid&#125;      destroy     删除用户</span><br></pre></td></tr></table></figure><h3 id="2-API详情"><a href="#2-API详情" class="headerlink" title="2. API详情"></a>2. API详情</h3><h4 id="2-1-登录"><a href="#2-1-登录" class="headerlink" title="2.1 登录"></a>2.1 登录</h4><blockquote><p>Method: post<br>URI: api/login</p></blockquote><table><thead><tr><th style="text-align:left">入参</th><th style="text-align:left">类型</th><th style="text-align:left">是否必须</th><th style="text-align:left">参数说明</th><th style="text-align:left">默认值</th><th style="text-align:left">例子</th></tr></thead><tbody><tr><td style="text-align:left">email</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">用户名</td><td style="text-align:left">无</td><td style="text-align:left"><a href="mailto:lynch.bertram@example.com" target="_blank" rel="noopener">lynch.bertram@example.com</a></td></tr><tr><td style="text-align:left">password</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">加密密码</td><td style="text-align:left">无</td><td style="text-align:left">rtrim(strtr(base64_encode(‘password’), ‘+/‘, ‘-_’), ‘=’)</td></tr></tbody></table><table><thead><tr><th style="text-align:left">出参</th><th style="text-align:left">类型</th><th style="text-align:left">参数说明</th></tr></thead><tbody><tr><td style="text-align:left">access_token</td><td style="text-align:left">string</td><td style="text-align:left">令牌</td></tr><tr><td style="text-align:left">id</td><td style="text-align:left">int</td><td style="text-align:left">用户id</td></tr><tr><td style="text-align:left">user_nickname</td><td style="text-align:left">string</td><td style="text-align:left">用户昵称</td></tr><tr><td style="text-align:left">avatar</td><td style="text-align:left">string</td><td style="text-align:left">头像</td></tr></tbody></table><h4 id="2-2-退出登录"><a href="#2-2-退出登录" class="headerlink" title="2.2 退出登录"></a>2.2 退出登录</h4><blockquote><p>Method: post<br>URI: api/logout</p></blockquote><table><thead><tr><th style="text-align:left">入参</th><th style="text-align:left">类型</th><th style="text-align:left">是否必须</th><th style="text-align:left">参数说明</th><th style="text-align:left">默认值</th><th style="text-align:left">例子</th></tr></thead><tbody><tr><td style="text-align:left">access_token</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">令牌</td><td style="text-align:left">无</td><td style="text-align:left">xxx.yyy.zzz</td></tr></tbody></table><table><thead><tr><th style="text-align:left">出参</th><th style="text-align:left">类型</th><th style="text-align:left">参数说明</th></tr></thead><tbody><tr><td style="text-align:left"></td></tr></tbody></table><h4 id="2-3-获取单个用户信息"><a href="#2-3-获取单个用户信息" class="headerlink" title="2.3 获取单个用户信息"></a>2.3 获取单个用户信息</h4><blockquote><p>Method: get<br>URI: api/users/{userid}</p></blockquote><table><thead><tr><th style="text-align:left">入参</th><th style="text-align:left">类型</th><th style="text-align:left">是否必须</th><th style="text-align:left">参数说明</th><th style="text-align:left">默认值</th><th style="text-align:left">例子</th></tr></thead><tbody><tr><td style="text-align:left">id</td><td style="text-align:left">int</td><td style="text-align:left">yes</td><td style="text-align:left">用户id</td><td style="text-align:left">无</td><td style="text-align:left">123</td></tr><tr><td style="text-align:left">access_token</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">令牌</td><td style="text-align:left">无</td><td style="text-align:left">xxx.yyy.zzz</td></tr></tbody></table><table><thead><tr><th style="text-align:left">出参</th><th style="text-align:left">类型</th><th style="text-align:left">参数说明</th><th style="text-align:left">默认值</th><th style="text-align:left">例子</th></tr></thead><tbody><tr><td style="text-align:left">user_name</td><td style="text-align:left">string</td><td style="text-align:left">登录名</td><td style="text-align:left">无</td><td style="text-align:left">xiaoming</td></tr><tr><td style="text-align:left">user_nickname</td><td style="text-align:left">string</td><td style="text-align:left">昵称</td><td style="text-align:left">无</td><td style="text-align:left">小明</td></tr><tr><td style="text-align:left">mobile</td><td style="text-align:left">string</td><td style="text-align:left">手机号</td><td style="text-align:left">无</td><td style="text-align:left">13312341234</td></tr><tr><td style="text-align:left">email</td><td style="text-align:left">string</td><td style="text-align:left">邮箱</td><td style="text-align:left">无</td><td style="text-align:left"><a href="mailto:xiaoming@163.com" target="_blank" rel="noopener">xiaoming@163.com</a></td></tr><tr><td style="text-align:left">avatar</td><td style="text-align:left">string</td><td style="text-align:left">头像</td><td style="text-align:left">无</td><td style="text-align:left"><a href="http://www.test.com/1.jpg" target="_blank" rel="noopener">http://www.test.com/1.jpg</a></td></tr><tr><td style="text-align:left">role_name</td><td style="text-align:left">string</td><td style="text-align:left">角色名称</td><td style="text-align:left">无</td><td style="text-align:left">系统管理员</td></tr><tr><td style="text-align:left">company_name</td><td style="text-align:left">string</td><td style="text-align:left">公司名称</td><td style="text-align:left">无</td><td style="text-align:left">央视新闻移动网</td></tr><tr><td style="text-align:left">expirydate</td><td style="text-align:left">string</td><td style="text-align:left">过期时间</td><td style="text-align:left">无</td><td style="text-align:left">2019-09-20</td></tr><tr><td style="text-align:left">t_status</td><td style="text-align:left">string</td><td style="text-align:left">状态(0:关闭,1:开启)</td><td style="text-align:left">无</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">reporter_group_name</td><td style="text-align:left">string</td><td style="text-align:left">部门分组</td><td style="text-align:left">无</td><td style="text-align:left">技术部/合作组</td></tr></tbody></table><h4 id="2-4-编辑用户信息"><a href="#2-4-编辑用户信息" class="headerlink" title="2.4 编辑用户信息"></a>2.4 编辑用户信息</h4><blockquote><p>Method: get<br>URI: api/users/{userid}/edit</p></blockquote><table><thead><tr><th style="text-align:left">入参</th><th style="text-align:left">类型</th><th style="text-align:left">是否必须</th><th style="text-align:left">参数说明</th><th style="text-align:left">默认值</th><th style="text-align:left">例子</th></tr></thead><tbody><tr><td style="text-align:left">userid</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">用户名</td><td style="text-align:left">无</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">access_token</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">令牌</td><td style="text-align:left">无</td><td style="text-align:left">xxx.yyy.zzz</td></tr></tbody></table><table><thead><tr><th style="text-align:left">出参</th><th style="text-align:left">类型</th><th style="text-align:left">参数说明</th></tr></thead><tbody><tr><td style="text-align:left"></td></tr></tbody></table><h4 id="2-5-更新用户信息"><a href="#2-5-更新用户信息" class="headerlink" title="2.5 更新用户信息"></a>2.5 更新用户信息</h4><blockquote><p>Method: put<br>URI: api/users/{userid}</p></blockquote><table><thead><tr><th style="text-align:left">入参</th><th style="text-align:left">类型</th><th style="text-align:left">是否必须</th><th style="text-align:left">参数说明</th><th style="text-align:left">默认值</th><th style="text-align:left">例子</th></tr></thead><tbody><tr><td style="text-align:left">userid</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">用户名</td><td style="text-align:left">无</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">access_token</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">令牌</td><td style="text-align:left">无</td><td style="text-align:left">xxx.yyy.zzz</td></tr><tr><td style="text-align:left">user_name</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">登录名</td><td style="text-align:left">无</td><td style="text-align:left">xiaoming</td></tr><tr><td style="text-align:left">user_nickname</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">昵称</td><td style="text-align:left">无</td><td style="text-align:left">小明</td></tr><tr><td style="text-align:left">mobile</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">手机号</td><td style="text-align:left">无</td><td style="text-align:left">13312341234</td></tr><tr><td style="text-align:left">t_status</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">状态(0:关闭,1:开启)</td><td style="text-align:left">无</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">reporter_group_name</td><td style="text-align:left">yes</td><td style="text-align:left">string</td><td style="text-align:left">部门分组</td><td style="text-align:left">无</td><td style="text-align:left">技术部/合作组</td></tr><tr><td style="text-align:left">expirydate</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">过期时间</td><td style="text-align:left">无</td><td style="text-align:left">2019-09-20</td></tr><tr><td style="text-align:left">description</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">描述</td><td style="text-align:left">无</td><td style="text-align:left">i am a description</td></tr><tr><td style="text-align:left">role_name</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">角色名称</td><td style="text-align:left">无</td><td style="text-align:left">系统管理员</td></tr><tr><td style="text-align:left">company_name</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">公司名称</td><td style="text-align:left">无</td><td style="text-align:left">央视新闻移动网</td></tr><tr><td style="text-align:left">user_password</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">用户密码</td><td style="text-align:left">无</td><td style="text-align:left">$2y$10$jrYGOgJPS/Rs.AAVyesEE./Oq8coNKU/Is0yBV2KQGXlngZ6no6Di</td></tr></tbody></table><table><thead><tr><th style="text-align:left">出参</th><th style="text-align:left">类型</th><th style="text-align:left">参数说明</th></tr></thead><tbody><tr><td style="text-align:left"></td></tr></tbody></table><h4 id="2-6-删除用户"><a href="#2-6-删除用户" class="headerlink" title="2.6 删除用户"></a>2.6 删除用户</h4><blockquote><p>Method: delete<br>URI: api/users/{userid}</p></blockquote><table><thead><tr><th style="text-align:left">入参</th><th style="text-align:left">类型</th><th style="text-align:left">是否必须</th><th style="text-align:left">参数说明</th><th style="text-align:left">默认值</th><th style="text-align:left">例子</th></tr></thead><tbody><tr><td style="text-align:left">userid</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">用户名</td><td style="text-align:left">无</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">access_token</td><td style="text-align:left">string</td><td style="text-align:left">yes</td><td style="text-align:left">令牌</td><td style="text-align:left">无</td><td style="text-align:left">xxx.yyy.zzz</td></tr></tbody></table><table><thead><tr><th style="text-align:left">出参</th><th style="text-align:left">类型</th><th style="text-align:left">参数说明</th></tr></thead><tbody><tr><td style="text-align:left"></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-REST-API&quot;&gt;&lt;a href=&quot;#1-REST-API&quot; class=&quot;headerlink&quot; title=&quot;1. REST API&quot;&gt;&lt;/a&gt;1. REST API&lt;/h3&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;t
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>dingo总结</title>
    <link href="http://yoursite.com/2018/10/08/dingo%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2018/10/08/dingo总结/</id>
    <published>2018-10-08T03:07:48.000Z</published>
    <updated>2018-10-08T03:16:20.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-api-request示例"><a href="#1-api-request示例" class="headerlink" title="1. api request示例"></a>1. api request示例</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.1header</span></span><br><span class="line">Accept: application/vnd.lumen.v1+json</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.2.env文件</span></span><br><span class="line">API_PREFIX=api</span><br><span class="line">API_STANDARDS_TREE=vnd</span><br><span class="line">API_SUBTYPE=lumen</span><br><span class="line">API_VERSION=v1</span><br><span class="line">API_STRICT=<span class="keyword">false</span></span><br><span class="line">API_DEFAULT_FORMAT=json</span><br><span class="line">API_DEBUG=<span class="keyword">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.3route:/routes/api/v1.php</span></span><br><span class="line">$api = app(<span class="string">'Dingo\Api\Routing\Router'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// v1 version API</span></span><br><span class="line"><span class="comment">// add in header    Accept:application/vnd.lumen.v1+json</span></span><br><span class="line">$api-&gt;version(<span class="string">'v1'</span>, [</span><br><span class="line">    <span class="string">'namespace'</span> =&gt; <span class="string">'App\Http\Controllers\Api\V1'</span>,</span><br><span class="line">    <span class="string">'middleware'</span> =&gt; [</span><br><span class="line">        <span class="string">'cors'</span>,</span><br><span class="line">        <span class="string">'serializer'</span>,</span><br><span class="line">         <span class="comment">//'serializer:array', // if you want to remove data wrap</span></span><br><span class="line">        <span class="string">'api.throttle'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// each route have a limit of 20 of 1 minutes</span></span><br><span class="line">    <span class="string">'limit'</span> =&gt; <span class="number">20</span>, <span class="string">'expires'</span> =&gt; <span class="number">1</span>,</span><br><span class="line">], <span class="function"><span class="keyword">function</span> <span class="params">($api)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Auth</span></span><br><span class="line">    <span class="comment">// login</span></span><br><span class="line">    $api-&gt;post(<span class="string">'authorizations'</span>, [</span><br><span class="line">        <span class="string">'as'</span> =&gt; <span class="string">'authorizations.store'</span>,</span><br><span class="line">        <span class="string">'uses'</span> =&gt; <span class="string">'AuthController@store'</span>,</span><br><span class="line">    ]);</span><br><span class="line"></span><br><span class="line">        $api-&gt;get(<span class="string">'test'</span>, [</span><br><span class="line">                <span class="string">'as'</span> =&gt; <span class="string">'test.index'</span>,</span><br><span class="line">                <span class="string">'uses'</span> =&gt; <span class="string">'TestController@index'</span>,</span><br><span class="line">        ]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.4controller:/app/Http/Controllers/Api/V1/TestController.php</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Controllers</span>\<span class="title">Api</span>\<span class="title">V1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Models</span>\<span class="title">Authorization</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Transformers</span>\<span class="title">AuthorizationTransformer</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">BaseController</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">'index'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-api-request示例&quot;&gt;&lt;a href=&quot;#1-api-request示例&quot; class=&quot;headerlink&quot; title=&quot;1. api request示例&quot;&gt;&lt;/a&gt;1. api request示例&lt;/h3&gt;&lt;figure class=&quot;high
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>memcache扩展</title>
    <link href="http://yoursite.com/2018/10/07/memcache%E6%89%A9%E5%B1%95/"/>
    <id>http://yoursite.com/2018/10/07/memcache扩展/</id>
    <published>2018-10-07T07:10:34.000Z</published>
    <updated>2018-10-07T07:45:40.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-安装memcached依赖libevent和下载源码包"><a href="#1-安装memcached依赖libevent和下载源码包" class="headerlink" title="1. 安装memcached依赖libevent和下载源码包"></a>1. 安装memcached依赖libevent和下载源码包</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install libevent libevent-devel</span><br></pre></td></tr></table></figure><p><a href="http://www.memcached.org/" target="_blank" rel="noopener">官方下载</a></p><h3 id="2-安装memcached"><a href="#2-安装memcached" class="headerlink" title="2. 安装memcached"></a>2. 安装memcached</h3><h4 id="2-1-创建memcached用户"><a href="#2-1-创建memcached用户" class="headerlink" title="2.1 创建memcached用户"></a>2.1 创建memcached用户</h4><p>#useradd -d /var/run/memcached/ -s /sbin/nologin -c “Memcached daemon” memcached</p><h4 id="2-2-解压源码包并编译安装"><a href="#2-2-解压源码包并编译安装" class="headerlink" title="2.2 解压源码包并编译安装"></a>2.2 解压源码包并编译安装</h4><p>#tar zxvf memcached-1.4.24.tar.gz</p><p>#cd memcached-1.4.24</p><p>#./configure –prefix=/usr/local/memcached</p><p>#make &amp;&amp; make install</p><h4 id="2-3-添加service脚本"><a href="#2-3-添加service脚本" class="headerlink" title="2.3 添加service脚本"></a>2.3 添加service脚本</h4><p>#vi /etc/rc.d/init.d/memcached<br>内容如下:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /bin/sh</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># chkconfig: - 55 45</span></span><br><span class="line"><span class="comment"># description: The memcached daemon is a network memory cache service.</span></span><br><span class="line"><span class="comment"># processname: memcached</span></span><br><span class="line"><span class="comment"># config: /etc/sysconfig/memcached</span></span><br><span class="line"><span class="comment"># pidfile: /var/run/memcached/memcached.pid</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Standard LSB functions</span></span><br><span class="line"><span class="comment">#. /lib/lsb/init-functions</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Source function library.</span></span><br><span class="line">. /etc/init.d/functions</span><br><span class="line"></span><br><span class="line">IP=<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">PORT=<span class="number">11211</span></span><br><span class="line">USER=memcached</span><br><span class="line">MAXCONN=<span class="number">1024</span></span><br><span class="line">CACHESIZE=<span class="number">64</span></span><br><span class="line">OPTIONS=<span class="string">""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check that networking is up.</span></span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"$NETWORKING"</span> = <span class="string">"no"</span> ]</span><br><span class="line">then</span><br><span class="line"></span><br><span class="line"><span class="keyword">exit</span> <span class="number">0</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">RETVAL=<span class="number">0</span></span><br><span class="line">prog=<span class="string">"memcached"</span></span><br><span class="line">pidfile=$&#123;PIDFILE-/<span class="keyword">var</span>/run/memcached/memcached.pid&#125;</span><br><span class="line">lockfile=$&#123;LOCKFILE-/<span class="keyword">var</span>/lock/subsys/memcached&#125;</span><br><span class="line"></span><br><span class="line">start () &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> -n $<span class="string">"Starting $prog: "</span></span><br><span class="line"><span class="comment"># Ensure that /var/run/memcached has proper permissions</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"`stat -c %U /var/run/memcached`"</span> != <span class="string">"$USER"</span> ]; then</span><br><span class="line">    chown $USER /<span class="keyword">var</span>/run/memcached</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">daemon --pidfile $&#123;pidfile&#125;  /usr/local/memcached/bin/memcached -d -l $IP  -p $PORT -u $USER  -m $CACHESIZE -c $MAXCONN -P $&#123;pidfile&#125; $OPTIONS</span><br><span class="line">RETVAL=$?</span><br><span class="line"><span class="keyword">echo</span></span><br><span class="line">[ $RETVAL -eq <span class="number">0</span> ] &amp;&amp; touch $&#123;lockfile&#125;</span><br><span class="line">&#125;</span><br><span class="line">stop () &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> -n $<span class="string">"Stopping $prog: "</span></span><br><span class="line">killproc -p $&#123;pidfile&#125; /usr/local/memcached/bin</span><br><span class="line">RETVAL=$?</span><br><span class="line"><span class="keyword">echo</span></span><br><span class="line"><span class="keyword">if</span> [ $RETVAL -eq <span class="number">0</span> ] ; then</span><br><span class="line">    rm -f $&#123;lockfile&#125; $&#123;pidfile&#125;</span><br><span class="line">fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">restart () &#123;</span><br><span class="line"></span><br><span class="line">    stop</span><br><span class="line">    start</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># See how we were called.</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"$1"</span> in</span><br><span class="line">start)</span><br><span class="line"></span><br><span class="line">start</span><br><span class="line">;;</span><br><span class="line">stop)</span><br><span class="line"></span><br><span class="line">stop</span><br><span class="line">;;</span><br><span class="line">status)</span><br><span class="line"></span><br><span class="line">status -p $&#123;pidfile&#125; memcached</span><br><span class="line">RETVAL=$?</span><br><span class="line">;;</span><br><span class="line">restart|reload|force-reload)</span><br><span class="line"></span><br><span class="line">restart</span><br><span class="line">;;</span><br><span class="line">condrestart|<span class="keyword">try</span>-restart)</span><br><span class="line"></span><br><span class="line">[ -f $&#123;lockfile&#125; ] &amp;&amp; restart || :</span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $<span class="string">"Usage: $0 &#123;start|stop|status|restart|reload|force- reload|condrestart|try-restart&#125;"</span></span><br><span class="line">RETVAL=<span class="number">2</span></span><br><span class="line">    ;;</span><br><span class="line">esac</span><br><span class="line"></span><br><span class="line"><span class="keyword">exit</span> $RETVAL</span><br></pre></td></tr></table></figure></p><h4 id="2-4启动并测试"><a href="#2-4启动并测试" class="headerlink" title="2.4启动并测试"></a>2.4启动并测试</h4><p>chmod a+x /etc/init.d/memcached<br>service memcached start<br>telnet 127.0.0.1 11211<br>stats<br>退出stats和telnet ctrl+] quit</p><h3 id="3-安装php-memcache"><a href="#3-安装php-memcache" class="headerlink" title="3. 安装php memcache"></a>3. 安装php memcache</h3><h4 id="3-1-安装依赖"><a href="#3-1-安装依赖" class="headerlink" title="3.1 安装依赖"></a>3.1 安装依赖</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="comment">//launchpad.net/libmemcached/1.0/1.0.18/+download/libmemcached-1.0.18.tar.gz</span></span><br><span class="line">tar zxf libmemcached<span class="number">-1.0</span><span class="number">.18</span>.tar.gz</span><br><span class="line">cd libmemcached<span class="number">-1.0</span><span class="number">.18</span></span><br><span class="line">./configure --prefix=/usr/local/libmemcached --with-memcached</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h4 id="3-2-下载安装php-memcache扩展"><a href="#3-2-下载安装php-memcache扩展" class="headerlink" title="3.2 下载安装php memcache扩展"></a>3.2 下载安装php memcache扩展</h4><blockquote><p>注意:php7以外可以在pecl扩展库下载,下面介绍php7的情况<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">clone</span> https:<span class="comment">//github.com/php-memcached-dev/php-memcached.git</span></span><br><span class="line">cd php-memcached</span><br><span class="line">git checkout php7</span><br><span class="line">/usr/local/php/bin/phpize</span><br><span class="line">./configure --enable-memcached --with-php-config=/usr/local/php/bin/php-config --with-libmemcached-dir=/usr/local/libmemcached  --disable-memcached-sasl</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="comment">//php.ini中添加</span></span><br><span class="line">[Memcached]</span><br><span class="line">extension=memcached.so</span><br><span class="line"><span class="comment">//重启php-fpm</span></span><br><span class="line">service php-fpm restart</span><br></pre></td></tr></table></figure></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-安装memcached依赖libevent和下载源码包&quot;&gt;&lt;a href=&quot;#1-安装memcached依赖libevent和下载源码包&quot; class=&quot;headerlink&quot; title=&quot;1. 安装memcached依赖libevent和下载源码包&quot;&gt;&lt;/
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>mysql总结</title>
    <link href="http://yoursite.com/2018/10/05/mysql%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2018/10/05/mysql总结/</id>
    <published>2018-10-04T16:34:56.000Z</published>
    <updated>2018-10-07T07:03:59.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-更改密码及导出"><a href="#1-更改密码及导出" class="headerlink" title="1. 更改密码及导出"></a>1. 更改密码及导出</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'mysqladmin -uroot -proot password + 新密码'</span>, <span class="comment">//更改密码</span></span><br><span class="line"><span class="string">'mysql -uroot -p +数据库 &lt; +sql路径'</span>,<span class="comment">//导入sql文件</span></span><br><span class="line"><span class="string">'mysqldump -uroot -p [-d] +数据库 &gt; sql文件'</span>, <span class="comment">//导出sql文件,-d:no data(仅结构)</span></span><br></pre></td></tr></table></figure><h3 id="2-linux下mysql安装"><a href="#2-linux下mysql安装" class="headerlink" title="2. linux下mysql安装"></a>2. linux下mysql安装</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql</span><br><span class="line">useradd -g mysql -s /sbin/nologin -M mysql, <span class="comment">//-s:定义shell,-M : 不建立根目录,-g:指定组</span></span><br><span class="line">mkdir -p /data/mysql/data,</span><br><span class="line">chown -R mysql:mysql /data/mysql,</span><br><span class="line"></span><br><span class="line">yum -y install gcc gcc-c++ cmake ncurses-devel bison,</span><br><span class="line">wget --no-check-certificate https:<span class="comment">//dev.mysql.com/get/Downloads/MySQL-5.6/mysql-5.6.39.tar.gz, //下载</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cmake ./</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DCMAKE_INSTALL_PREFIX=/usr/local/mysql          \    #安装路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DMYSQL_DATADIR=/usr/local/mysql/data            \    #数据文件存放位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DSYSCONFDIR=/etc                                \    #my.cnf路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DWITH_MYISAM_STORAGE_ENGINE=1                   \    #支持MyIASM引擎</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DWITH_INNOBASE_STORAGE_ENGINE=1                 \    #支持InnoDB引擎</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DWITH_MEMORY_STORAGE_ENGINE=1                   \    #支持Memory引擎</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DWITH_READLINE=1                                \    #快捷键功能(我没用过)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DMYSQL_UNIX_ADDR=/tmp/mysqld.sock               \    #连接数据库socket路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DMYSQL_TCP_PORT=3306                            \    #端口</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DENABLED_LOCAL_INFILE=1                         \    #允许从本地导入数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DWITH_PARTITION_STORAGE_ENGINE=1                \    #安装支持数据库分区</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DMYSQL_USER=mysql                                \   #mysqld运行用户</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DEXTRA_CHARSETS=all                             \    #安装所有的字符集</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DDEFAULT_CHARSET=utf8                           \    #默认字符</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -DDEFAULT_COLLATION=utf8_general_ci</span></span><br><span class="line"><span class="comment"># make &amp;&amp; make install</span></span><br><span class="line"></span><br><span class="line">cmake ./ \</span><br><span class="line">-DCMAKE_INSTALL_PREFIX=/usr/local/mysql         \</span><br><span class="line">-DMYSQL_DATADIR=/data/mysql/data                \</span><br><span class="line">-DSYSCONFDIR=/etc                                \</span><br><span class="line">-DWITH_MYISAM_STORAGE_ENGINE=<span class="number">1</span>                   \</span><br><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=<span class="number">1</span>                 \</span><br><span class="line">-DMYSQL_UNIX_ADDR=/data/mysql/mysqld.sock        \</span><br><span class="line">-DMYSQL_TCP_PORT=<span class="number">3306</span>                            \</span><br><span class="line">-DENABLED_LOCAL_INFILE=<span class="number">1</span>                         \</span><br><span class="line">-DWITH_PARTITION_STORAGE_ENGINE=<span class="number">1</span>                \</span><br><span class="line">-DMYSQL_USER=mysql                               \</span><br><span class="line">-DEXTRA_CHARSETS=all                             \</span><br><span class="line">-DDEFAULT_CHARSET=utf8                           \</span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci</span><br><span class="line"></span><br><span class="line">make&amp;&amp;make install,</span><br><span class="line"></span><br><span class="line">chown -R mysql:mysql /usr/local/mysql/,</span><br><span class="line">mv /usr/local/src/mysql<span class="number">-5.6</span><span class="number">.39</span>/support-files/my-<span class="keyword">default</span>.cnf /etc/my.cnf <span class="comment">//选择覆盖</span></span><br><span class="line"></span><br><span class="line">mv /usr/local/src/mysql<span class="number">-5.6</span><span class="number">.39</span>/support-files/mysql.server /etc/init.d/mysqld <span class="comment">//服务端启动放入服务中service mysqld start</span></span><br><span class="line">chmod a+x /etc/init.d/mysqld,</span><br><span class="line">chkconfig --level <span class="number">345</span> mysqld on, <span class="comment">//开机启动</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"export PATH=/usr/local/mysql/bin/:$PATH"</span> &gt;&gt; /etc/profile</span><br><span class="line">source /etc/profile <span class="comment">//设置环境变量,方便客户端启动</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化设置(user,配置文件,基础目录,数据目录)</span></span><br><span class="line">/usr/local/mysql/scripts/mysql_install_db \</span><br><span class="line">--user=mysql \</span><br><span class="line">--defaults-file=/etc/my.cnf \</span><br><span class="line">--basedir=/usr/local/mysql \</span><br><span class="line">--datadir=/data/mysql/data</span><br><span class="line"></span><br><span class="line">vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">user=mysql</span><br><span class="line">basedir=/usr/local/mysql</span><br><span class="line"><span class="keyword">default</span>-storage-engine=Innodb</span><br><span class="line">datadir=/data/mysql/data <span class="comment">//放置于mysql模块</span></span><br><span class="line">socket=/data/mysql/mysql.sock</span><br><span class="line">[mysql]</span><br><span class="line">socket=/data/mysql/mysql.sock <span class="comment">//注意放在最下方</span></span><br><span class="line"></span><br><span class="line">service mysqld reload</span><br><span class="line">service mysqld start</span><br><span class="line"></span><br><span class="line">/usr/bin/mysqladmin -u root password \<span class="string">'z\' //修改密码</span></span><br><span class="line"><span class="string">mysql -u root -p  -P port //登录</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">说明:</span></span><br><span class="line"><span class="string">参数说明:</span></span><br><span class="line"><span class="string">-DCMAKE_INSTALL_PREFIX=/usr/local/mysql //安装目录</span></span><br><span class="line"><span class="string">-DMYSQL_DATADIR=/usr/local/mysql/data //数据库存放目录</span></span><br><span class="line"><span class="string">-DWITH_MYISAM_STORAGE_ENGINE=1 //安装myisam存储引擎</span></span><br><span class="line"><span class="string">-DWITH_INNOBASE_STORAGE_ENGINE=1 //安装innodb存储引擎</span></span><br><span class="line"><span class="string">-DWITH_ARCHIVE_STORAGE_ENGINE=1 //安装archive存储引擎</span></span><br><span class="line"><span class="string">-DWITH_BLACKHOLE_STORAGE_ENGINE=1 //安装blackhole存储引擎</span></span><br><span class="line"><span class="string">-DENABLED_LOCAL_INFILE=1 //允许从本地导入数据</span></span><br><span class="line"><span class="string">-DDEFAULT_CHARSET=utf8 　　//使用utf8字符</span></span><br><span class="line"><span class="string">-DDEFAULT_COLLATION=utf8_general_ci //校验字符</span></span><br><span class="line"><span class="string">-DEXTRA_CHARSETS=all 　　//安装所有扩展字符集</span></span><br><span class="line"><span class="string">-DMYSQL_TCP_PORT=3306 //MySQL监听端口</span></span><br><span class="line"><span class="string">-DMYSQL_USER=mysql //MySQL用户名</span></span><br><span class="line"><span class="string">其他参数:</span></span><br><span class="line"><span class="string">-DWITH-EMBEDDED_SERVER=1 //编译成embedded MySQL library (libmysqld.a)</span></span><br><span class="line"><span class="string">-DSYSCONFDIR=/etc //MySQL配辑文件</span></span><br><span class="line"><span class="string">-DMYSQL_UNIX_ADDR=/tmp/mysqld.sock //Unix socket 文件路径</span></span><br><span class="line"><span class="string">-DWITH_READLINE=1 //快捷键功能</span></span><br><span class="line"><span class="string">-DWITH_SSL=yes //SSL</span></span><br><span class="line"><span class="string">-DWITH_MEMORY_STORAGE_ENGINE=1 //安装memory存储引擎</span></span><br><span class="line"><span class="string">-DWITH_FEDERATED_STORAGE_ENGINE=1 //安装frderated存储引擎</span></span><br><span class="line"><span class="string">-DWITH_PARTITION_STORAGE_ENGINE=1 //安装数据库分区</span></span><br><span class="line"><span class="string">-DINSTALL_PLUGINDIR=/usr/local/mysql/plugin //插件文件及配置路径</span></span><br></pre></td></tr></table></figure><h3 id="3-设置权限"><a href="#3-设置权限" class="headerlink" title="3. 设置权限"></a>3. 设置权限</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO <span class="string">'root'</span>@<span class="string">'%'</span> IDENTIFIED BY <span class="string">'123456aA'</span> WITH GRANT OPTION;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><h3 id="4-pdo"><a href="#4-pdo" class="headerlink" title="4.pdo"></a>4.pdo</h3><h4 id="4-1-pdo类"><a href="#4-1-pdo类" class="headerlink" title="4.1 pdo类"></a>4.1 pdo类</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by PhpStorm.</span></span><br><span class="line"><span class="comment"> * User: tc-net</span></span><br><span class="line"><span class="comment"> * Date: 2016/8/11 0011</span></span><br><span class="line"><span class="comment"> * Time: 16:32</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MysqlPDO</span></span>&#123;</span><br><span class="line">    <span class="comment">//获取对象句柄</span></span><br><span class="line">    <span class="keyword">protected</span> $message = <span class="string">'Unknown exception'</span>; <span class="comment">// 异常信息</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> $_instance = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">protected</span> $dbh;</span><br><span class="line">    <span class="keyword">protected</span> $where = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">protected</span> $wheredata = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">protected</span> $order = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($param)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//echo 'mysql:host=' . $param['hostname'] . ';port=' . $param['port'] . ';dbname=' . $param['database'], $param['username'], $param['password'];exit;</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;dbh = <span class="keyword">new</span> PDO ( <span class="string">'mysql:host='</span> . $param[<span class="string">'hostname'</span>] . <span class="string">';port='</span> . $param[<span class="string">'port'</span>] . <span class="string">';dbname='</span> . $param[<span class="string">'database'</span>], $param[<span class="string">'username'</span>], $param[<span class="string">'password'</span>], <span class="keyword">array</span> (PDO::ATTR_PERSISTENT =&gt; <span class="keyword">false</span>,PDO::MYSQL_ATTR_INIT_COMMAND =&gt; <span class="string">"set names utf8mb4;"</span>) );</span><br><span class="line"><span class="comment">//            self::$PDOInstance-&gt;query("SET client_encoding='UTF-8';");</span></span><br><span class="line"><span class="comment">//            self::$PDOInstance-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);</span></span><br><span class="line"><span class="comment">//            self::$PDOInstance-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> ( PDOException $e ) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="keyword">Exception</span>(<span class="string">'MySQL Error: '</span>.$e-&gt;getMessage ());</span><br><span class="line">            <span class="keyword">exit</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">clearWhere</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;where = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;wheredata = <span class="keyword">array</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">error</span><span class="params">($stmt)</span></span>&#123;</span><br><span class="line">        $erorr = $stmt-&gt;errorInfo();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;message = <span class="string">"mysql ERROR:"</span>.$erorr[<span class="number">1</span>].<span class="string">" "</span>.$erorr[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="keyword">Exception</span>(<span class="keyword">$this</span>-&gt;message);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 防止克隆</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 单例</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span><span class="params">($param,$instance=<span class="string">'default'</span>)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="keyword">self</span>::$_instance[$instance])||<span class="keyword">self</span>::$_instance[$instance] === <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">self</span>::$_instance[$instance] = <span class="keyword">new</span> <span class="keyword">self</span>($param);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>::$_instance[$instance];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">where</span><span class="params">($field,$val)</span></span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;where[] = preg_match(<span class="string">'/[=&gt;&lt;]/i'</span>,$field)?<span class="string">"`&#123;$field&#125;`"</span>:<span class="string">"`&#123;$field&#125;`="</span>;</span><br><span class="line">        <span class="keyword">if</span>(is_array($val))&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;wheredata = array_merge(<span class="keyword">$this</span>-&gt;wheredata,$val);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          array_push(<span class="keyword">$this</span>-&gt;wheredata,$val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">like_where</span><span class="params">($field,$val)</span></span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;where[] = <span class="string">"`&#123;$field&#125;` like "</span>;</span><br><span class="line">        <span class="keyword">if</span>(is_array($val))&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;wheredata = array_merge(<span class="keyword">$this</span>-&gt;wheredata,$val);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            array_push(<span class="keyword">$this</span>-&gt;wheredata,$val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    public function orderby($field,$sort)&#123;</span></span><br><span class="line"><span class="comment">//        $this-&gt;order = "ORDER BY `&#123;$field&#125;` &#123;$sort&#125;";</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//    public function select($tablename,$fields='*')&#123;</span></span><br><span class="line"><span class="comment">//        $wheresql = !empty($this-&gt;where)?" WHERE ".implode("? AND ",$this-&gt;where)."?":'';</span></span><br><span class="line"><span class="comment">//        $sql = "SELECT &#123;$fields&#125; FROM &#123;$tablename&#125; &#123;$wheresql&#125;";</span></span><br><span class="line"><span class="comment">//        $stmt =  $this-&gt;dbh-&gt;prepare($sql);</span></span><br><span class="line"><span class="comment">//        $r = $stmt-&gt;execute();</span></span><br><span class="line"><span class="comment">//        return $r!==false?true:false;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $tablename 表名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $data array 数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> bool</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span><span class="params">($tablename,$data)</span></span>&#123;</span><br><span class="line">        <span class="comment">//防止全表更改</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">empty</span>(<span class="keyword">$this</span>-&gt;where))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">empty</span>($data)||!is_array($data))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        $setsql = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">foreach</span>($data <span class="keyword">as</span> $k=&gt;$v)&#123;</span><br><span class="line">            $setsql .= <span class="string">"`&#123;$k&#125;`=?,"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        $setsql = trim($setsql,<span class="string">','</span>);</span><br><span class="line">        $wheresql = implode(<span class="string">"? AND "</span>,<span class="keyword">$this</span>-&gt;where).<span class="string">"?"</span>;</span><br><span class="line">        $sql = <span class="string">"UPDATE &#123;$tablename&#125; SET &#123;$setsql&#125; WHERE &#123;$wheresql&#125;"</span>;</span><br><span class="line">        $data = array_values($data);</span><br><span class="line">        $data = array_merge_recursive($data,<span class="keyword">$this</span>-&gt;wheredata);</span><br><span class="line">        $stmt =  <span class="keyword">$this</span>-&gt;dbh-&gt;prepare($sql);</span><br><span class="line">        $r = $stmt-&gt;execute($data);</span><br><span class="line">        <span class="keyword">return</span> $r!==<span class="keyword">false</span>?<span class="keyword">true</span>:<span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $tablename</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $data array()</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> bool|string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">replace</span><span class="params">($tablename,$data)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">empty</span>($data)||!is_array($data))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        $setsql = <span class="string">''</span>;</span><br><span class="line">        $vals = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">foreach</span>($data <span class="keyword">as</span> $k=&gt;$v)&#123;</span><br><span class="line">            $setsql .= <span class="string">"`&#123;$k&#125;`,"</span>;</span><br><span class="line">            $vals .=<span class="string">"?,"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        $setsql = trim($setsql,<span class="string">','</span>);</span><br><span class="line">        $vals = trim($vals,<span class="string">','</span>);</span><br><span class="line">        $sql = <span class="string">"REPLACE into &#123;$tablename&#125;(&#123;$setsql&#125;) VALUES ($vals)"</span>;</span><br><span class="line">        $stmt =  <span class="keyword">$this</span>-&gt;dbh-&gt;prepare($sql);</span><br><span class="line">        <span class="keyword">if</span>($stmt-&gt;execute(array_values($data)))&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;dbh-&gt;lastInsertId();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//            var_dump($stmt-&gt;errorInfo());exit;</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;error($stmt);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">insert</span><span class="params">($tablename,$data)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">empty</span>($data)||!is_array($data))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        $setsql = <span class="string">''</span>;</span><br><span class="line">        $vals = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">foreach</span>($data <span class="keyword">as</span> $k=&gt;$v)&#123;</span><br><span class="line">            $setsql .= <span class="string">"`&#123;$k&#125;`,"</span>;</span><br><span class="line">            $vals .=<span class="string">"?,"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        $setsql = trim($setsql,<span class="string">','</span>);</span><br><span class="line">        $vals = trim($vals,<span class="string">','</span>);</span><br><span class="line">        $sql = <span class="string">"INSERT INTO &#123;$tablename&#125;(&#123;$setsql&#125;) VALUES ($vals)"</span>;</span><br><span class="line">       <span class="comment">// echo $sql;exit;</span></span><br><span class="line">        $stmt =  <span class="keyword">$this</span>-&gt;dbh-&gt;prepare($sql);</span><br><span class="line">        $data = is_array($data)?array_values($data):<span class="keyword">array</span>($data);</span><br><span class="line">        <span class="keyword">if</span>($stmt-&gt;execute(array_values($data)))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;dbh-&gt;lastInsertId();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//            var_dump($stmt-&gt;errorInfo());exit;</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;error($stmt);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取总数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $sql</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $param</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> bool</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTotal</span><span class="params">($sql,$param=<span class="string">''</span>)</span></span>&#123;</span><br><span class="line">        $stmt =  <span class="keyword">$this</span>-&gt;dbh-&gt;prepare($sql);</span><br><span class="line">        $param = !<span class="keyword">empty</span>($param)&amp;&amp;is_array($param)?array_values($param):<span class="keyword">array</span>($param);</span><br><span class="line">        <span class="comment">//var_dump($stmt-&gt;execute($param));</span></span><br><span class="line">        <span class="keyword">if</span> ($stmt-&gt;execute($param)) &#123;</span><br><span class="line">            $data = $stmt-&gt;fetch(PDO::FETCH_NUM);</span><br><span class="line">            <span class="keyword">return</span> $data[<span class="number">0</span>];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//            var_dump($stmt-&gt;errorInfo());exit;</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;error($stmt);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 执行非查询操作</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $sql</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $param</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> bool|string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">exec</span><span class="params">($sql,$param=<span class="string">''</span>)</span></span>&#123;</span><br><span class="line">        $stmt =  <span class="keyword">$this</span>-&gt;dbh-&gt;prepare($sql);</span><br><span class="line">        $param = !<span class="keyword">empty</span>($param)&amp;&amp;is_array($param)?array_values($param):<span class="keyword">array</span>($param);</span><br><span class="line">        <span class="keyword">if</span> ($stmt-&gt;execute($param)) &#123;</span><br><span class="line">            $id = <span class="keyword">$this</span>-&gt;dbh-&gt;lastInsertId();</span><br><span class="line">            <span class="keyword">return</span> $id?$id:<span class="keyword">TRUE</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//            var_dump($stmt-&gt;errorInfo());exit;</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;error($stmt);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">query</span><span class="params">($sql,$param=<span class="string">''</span>)</span></span>&#123;</span><br><span class="line">        $stmt =  <span class="keyword">$this</span>-&gt;dbh-&gt;prepare($sql);</span><br><span class="line">        <span class="keyword">if</span>(!<span class="keyword">empty</span>($param))&#123;</span><br><span class="line">            $param = !<span class="keyword">empty</span>($param)&amp;&amp;is_array($param)?array_values($param):<span class="keyword">array</span>($param);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ($param?$stmt-&gt;execute($param):$stmt-&gt;execute()) &#123;</span><br><span class="line">            $data = $stmt-&gt;fetchAll(PDO::FETCH_OBJ);</span><br><span class="line">            <span class="keyword">return</span> $data?$data:<span class="keyword">array</span>();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//            var_dump($stmt-&gt;errorInfo());exit;</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;error($stmt);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getOne</span><span class="params">($sql,$param=<span class="string">''</span>)</span></span>&#123;</span><br><span class="line">        $data = <span class="keyword">array</span>();</span><br><span class="line">        $stmt =  <span class="keyword">$this</span>-&gt;dbh-&gt;prepare($sql);</span><br><span class="line">        <span class="keyword">if</span>(!<span class="keyword">empty</span>($param))&#123;</span><br><span class="line">            $param = !<span class="keyword">empty</span>($param)&amp;&amp;is_array($param)?array_values($param):<span class="keyword">array</span>($param);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ($param?$stmt-&gt;execute($param):$stmt-&gt;execute()) &#123;</span><br><span class="line">            $data = $stmt-&gt;fetch(PDO::FETCH_OBJ);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//            var_dump($stmt-&gt;errorInfo());exit;</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;error($stmt);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> $data?$data:<span class="keyword">array</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * beginTransaction 事务开始</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">beginTransaction</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;dbh-&gt;beginTransaction();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * commit 事务提交</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">commit</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;dbh-&gt;commit();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * rollback 事务回滚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">rollback</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;dbh-&gt;rollback();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * checkFields 检查指定字段是否在指定数据表中存在</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> String $table</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $arrayField</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">checkFields</span><span class="params">($table, $arrayFields)</span></span>&#123;</span><br><span class="line">        $fields = <span class="keyword">$this</span>-&gt;getFields($table);</span><br><span class="line">        <span class="keyword">foreach</span> ($arrayFields <span class="keyword">as</span> $key =&gt; $value) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!in_array($key, $fields)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * getFields 获取指定数据表中的全部字段名</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> String $table 表名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">getFields</span><span class="params">($table)</span></span>&#123;</span><br><span class="line">        $fields = <span class="keyword">array</span>();</span><br><span class="line">        $recordset = <span class="keyword">$this</span>-&gt;dbh-&gt;query(<span class="string">"SHOW COLUMNS FROM $table"</span>);</span><br><span class="line">        <span class="keyword">$this</span>-&gt;getPDOError();</span><br><span class="line">        $recordset-&gt;setFetchMode(PDO::FETCH_ASSOC);</span><br><span class="line">        $result = $recordset-&gt;fetchAll();</span><br><span class="line">        <span class="keyword">foreach</span> ($result <span class="keyword">as</span> $rows) &#123;</span><br><span class="line">            $fields[] = $rows[<span class="string">'Field'</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> $fields;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * destruct 关闭数据库连接</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;dbh = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">self</span>::$_instance = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-配置"><a href="#4-2-配置" class="headerlink" title="4.2 配置"></a>4.2 配置</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$active_group = <span class="string">'default'</span>;</span><br><span class="line">$query_builder = <span class="keyword">TRUE</span>;</span><br><span class="line">$db[<span class="string">'default'</span>] = <span class="keyword">array</span>(</span><br><span class="line"><span class="comment">//    'hostname' =&gt; '172.31.16.8',</span></span><br><span class="line"><span class="comment">//    'username' =&gt; 'cctvnewsplatform',</span></span><br><span class="line"><span class="comment">//    'password' =&gt; '!Q@W#E$R',</span></span><br><span class="line">    <span class="string">'hostname'</span> =&gt; <span class="string">'localhost'</span>,</span><br><span class="line">    <span class="string">'username'</span> =&gt; <span class="string">'root'</span>,</span><br><span class="line">    <span class="string">'password'</span> =&gt; <span class="string">'123456aA'</span>,</span><br><span class="line">    <span class="string">'database'</span> =&gt; <span class="string">'test'</span>,</span><br><span class="line">    <span class="string">'dbprefix'</span> =&gt; <span class="string">''</span>,</span><br><span class="line">    <span class="string">'port'</span>     =&gt; <span class="string">'3306'</span>,</span><br><span class="line">    <span class="string">'pconnect'</span> =&gt; <span class="keyword">FALSE</span>,</span><br><span class="line">    <span class="string">'cache_on'</span> =&gt; <span class="keyword">FALSE</span>,</span><br><span class="line">    <span class="string">'cachedir'</span> =&gt; <span class="string">''</span>,</span><br><span class="line">    <span class="string">'char_set'</span> =&gt; <span class="string">'utf8'</span>,</span><br><span class="line">    <span class="string">'dbcollat'</span> =&gt; <span class="string">'utf8_general_ci'</span>,</span><br><span class="line">);</span><br><span class="line">$db[<span class="string">'db_slave'</span>] = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">'hostname'</span> =&gt; <span class="string">''</span>,</span><br><span class="line">    <span class="string">'username'</span> =&gt; <span class="string">''</span>,</span><br><span class="line">    <span class="string">'password'</span> =&gt; <span class="string">''</span>,</span><br><span class="line">    <span class="string">'database'</span> =&gt; <span class="string">'cctvnewsplatform'</span>,</span><br><span class="line">    <span class="string">'dbprefix'</span> =&gt; <span class="string">'cctvnewsplatform_'</span>,</span><br><span class="line">    <span class="string">'port'</span>     =&gt; <span class="string">'3306'</span>,</span><br><span class="line">    <span class="string">'pconnect'</span> =&gt; <span class="keyword">FALSE</span>,</span><br><span class="line">    <span class="string">'cache_on'</span> =&gt; <span class="keyword">FALSE</span>,</span><br><span class="line">    <span class="string">'cachedir'</span> =&gt; <span class="string">''</span>,</span><br><span class="line">    <span class="string">'char_set'</span> =&gt; <span class="string">'utf8mb4'</span>,</span><br><span class="line">    <span class="string">'dbcollat'</span> =&gt; <span class="string">'utf8mb4_general_ci'</span>,</span><br><span class="line">);</span><br><span class="line">$db[<span class="string">'vgc'</span>] = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">'hostname'</span> =&gt; <span class="string">''</span>,</span><br><span class="line">    <span class="string">'username'</span> =&gt; <span class="string">''</span>,</span><br><span class="line">    <span class="string">'password'</span> =&gt; <span class="string">''</span>,</span><br><span class="line">    <span class="string">'database'</span> =&gt; <span class="string">'cctvnews'</span>,</span><br><span class="line">    <span class="string">'dbprefix'</span> =&gt; <span class="string">''</span>,</span><br><span class="line">    <span class="string">'port'</span>     =&gt; <span class="string">'3306'</span>,</span><br><span class="line">    <span class="string">'char_set'</span> =&gt; <span class="string">'utf8mb4'</span>,</span><br><span class="line">    <span class="string">'dbcollat'</span> =&gt; <span class="string">'utf8mb4_general_ci'</span>,</span><br><span class="line">);</span><br><span class="line">$db[<span class="string">'log'</span>] = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">'hostname'</span> =&gt; <span class="string">''</span>,</span><br><span class="line">    <span class="string">'username'</span> =&gt; <span class="string">'log'</span>,</span><br><span class="line">    <span class="string">'password'</span> =&gt; <span class="string">''</span>,</span><br><span class="line">    <span class="string">'database'</span> =&gt; <span class="string">'log'</span>,</span><br><span class="line">    <span class="string">'dbprefix'</span> =&gt; <span class="string">'cctvnewsplatform_'</span>,</span><br><span class="line">    <span class="string">'port'</span>     =&gt; <span class="string">'3306'</span>,</span><br><span class="line">    <span class="string">'pconnect'</span> =&gt; <span class="keyword">FALSE</span>,</span><br><span class="line">    <span class="string">'cache_on'</span> =&gt; <span class="keyword">FALSE</span>,</span><br><span class="line">    <span class="string">'cachedir'</span> =&gt; <span class="string">''</span>,</span><br><span class="line">    <span class="string">'char_set'</span> =&gt; <span class="string">'utf8'</span>,</span><br><span class="line">    <span class="string">'dbcollat'</span> =&gt; <span class="string">'utf8_general_ci'</span>,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-更改密码及导出&quot;&gt;&lt;a href=&quot;#1-更改密码及导出&quot; class=&quot;headerlink&quot; title=&quot;1. 更改密码及导出&quot;&gt;&lt;/a&gt;1. 更改密码及导出&lt;/h3&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;t
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>linux深入总结</title>
    <link href="http://yoursite.com/2018/10/03/linux%E6%B7%B1%E5%85%A5%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2018/10/03/linux深入总结/</id>
    <published>2018-10-02T19:44:50.000Z</published>
    <updated>2018-10-11T09:03:25.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-编程层次"><a href="#1-编程层次" class="headerlink" title="1. 编程层次"></a>1. 编程层次</h3><p>硬件规格(Hardware Specification)<br>系统调用(System Call)<br>库调用(Library Call)</p><h3 id="2-user-interface-UI-用户接口"><a href="#2-user-interface-UI-用户接口" class="headerlink" title="2. user interface(UI):用户接口"></a>2. user interface(UI):用户接口</h3><p>GUI:Graphic User Interface(图像用户接口)<br>CLI:Command Line Interface(命令行接口)<br>ABI:Application Binary Interface(运行接口):程序编译成二进制可执行文件所使用的接口<br>API:Application Programing Interface(编程应用接口):比如程序未编译前所使用的接口</p><h3 id="3-书籍"><a href="#3-书籍" class="headerlink" title="3.书籍"></a>3.书籍</h3><p>&lt;&lt;奇点临近&gt;&gt;</p><h3 id="4-运行程序格式"><a href="#4-运行程序格式" class="headerlink" title="4.运行程序格式:"></a>4.运行程序格式:</h3><pre><code>Windows:EXE,dll(dynamic link library)Linux:ELF,so(shared object)</code></pre><h3 id="5-Linux发行版"><a href="#5-Linux发行版" class="headerlink" title="5.Linux发行版"></a>5.Linux发行版</h3><pre><code>slackware    suse        opensusedebian    ubantu        mintredhat    rhel:redhat enterprise linux    每18个月发行一次新版本    CentOs:兼容rhel版本    fedora:测试新软件,每6个月发型一个新版本ArchLinuxGentoo:更好的发挥硬件性能,比较难LFS:Linux From Scratch(linux book):linux怎么制作教程Android:kernel+busybox+java虚拟机</code></pre><h3 id="6-问题"><a href="#6-问题" class="headerlink" title="6.问题"></a>6.问题</h3><h4 id="6-1-CentOS和Linux是什么关系-CentOs和RHEL是什么关系"><a href="#6-1-CentOS和Linux是什么关系-CentOs和RHEL是什么关系" class="headerlink" title="6.1 CentOS和Linux是什么关系?CentOs和RHEL是什么关系?"></a>6.1 CentOS和Linux是什么关系?CentOs和RHEL是什么关系?</h4><h4 id="6-2-各种开源协议的具体细节"><a href="#6-2-各种开源协议的具体细节" class="headerlink" title="6.2 各种开源协议的具体细节?"></a>6.2 各种开源协议的具体细节?</h4><pre><code>GPL,LGPL,Apache,BSD</code></pre><h3 id="7-程序包管理器"><a href="#7-程序包管理器" class="headerlink" title="7.程序包管理器:"></a>7.程序包管理器:</h3><pre><code>rpm:    RHEL,Fedora,S.u.E.E,Centosdpt:    Debian,Ubuntu</code></pre><h3 id="6-概念解释"><a href="#6-概念解释" class="headerlink" title="6.概念解释"></a>6.概念解释</h3><pre><code>GNU:gnu is not unixgpl:gnu general public lisence自由软件许可证其他协议:apache,bsd,比gpl好</code></pre><h3 id="7-获取发行版本"><a href="#7-获取发行版本" class="headerlink" title="7.获取发行版本:"></a>7.获取发行版本:</h3><pre><code>mirrors.aliyun/souhu/163.com</code></pre><h3 id="8-打开图形界面"><a href="#8-打开图形界面" class="headerlink" title="8.打开图形界面"></a>8.打开图形界面</h3><pre><code>startx &amp;</code></pre><h3 id="9-命令"><a href="#9-命令" class="headerlink" title="9.命令"></a>9.命令</h3><p>echo $SHELL: 查看当前使用shell<br>cat /etc/shells: 查看系统支持shell<br>type command: 区别内部或外部命令</p><h4 id="9-1-hash命令"><a href="#9-1-hash命令" class="headerlink" title="9.1 hash命令"></a>9.1 hash命令</h4><p>hash: 缓存使用的命令路径于hash表,提高命令的调用速率<br>hash [-l]: 显示hash表内的内容<br>hash (-d name)/-r: 清除单个/全部缓存命令<br>注:<br>在命令已缓存的情况下,移动命令路径,会出现找不到命令的错误(即使命令在path中),解决方法: 重新登录终端或者删除缓存命令</p><h4 id="9-2-帮助命令"><a href="#9-2-帮助命令" class="headerlink" title="9.2 帮助命令"></a>9.2 帮助命令</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 内部命令</span></span><br><span class="line">help command</span><br><span class="line"></span><br><span class="line"><span class="comment"># 外部命令</span></span><br><span class="line">&lt;<span class="number">1</span>&gt; command --help/-h</span><br><span class="line">&lt;<span class="number">2</span>&gt; 使用手册: man command</span><br><span class="line">&lt;<span class="number">3</span>&gt; 信息页: info command</span><br><span class="line">&lt;<span class="number">4</span>&gt; 程序自身帮助文档(一般在/usr/share/doc/COMMAND-VERSION): README,INSTALL,ChangeLog</span><br><span class="line">&lt;<span class="number">5</span>&gt; 程序官方文档(Documentation)</span><br><span class="line">&lt;<span class="number">6</span>&gt; 发行版的官方文档(http:<span class="comment">//www.redhat.com/docs)</span></span><br><span class="line">&lt;<span class="number">7</span>&gt; google.cn</span><br><span class="line">    (openstack filetype:pdf):搜索全部为pdf格式的openstack</span><br><span class="line">    (openstack site:openstack.com):指明站点搜索</span><br><span class="line">&lt;<span class="number">8</span>&gt;(http:<span class="comment">//www.slideshare.net):pdf/ppt教程</span></span><br></pre></td></tr></table></figure><h4 id="9-3-man帮助详解"><a href="#9-3-man帮助详解" class="headerlink" title="9.3 man帮助详解"></a>9.3 man帮助详解</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">man COMMAND</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手册页所在位置</span></span><br><span class="line">/usr/share/man(大多数手册,具体位置在/etc/man.config中的MANPATH定义)</span><br><span class="line"></span><br><span class="line"><span class="comment">// man1.....man8介绍</span></span><br><span class="line">man1: 用户命令</span><br><span class="line">man2: 系统调用</span><br><span class="line">man3: C库调用</span><br><span class="line">man4: 设备文件及特殊文件</span><br><span class="line">man5: 配置文件格式</span><br><span class="line">man6: 游戏</span><br><span class="line">man7: 杂项</span><br><span class="line">man8: 管理类命令</span><br><span class="line"></span><br><span class="line">man -M path command   <span class="comment">//在指定目录下查找命令,如果目录为空,效果和没有-M参数一样</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//man命令段落说明</span></span><br><span class="line">SYNOPSIS(概要):</span><br><span class="line">    []: 可选内容</span><br><span class="line">    &lt;&gt;:必选内容</span><br><span class="line">    a|b:二选一</span><br><span class="line">    ...:同一内容可多次出现</span><br></pre></td></tr></table></figure><ul><li>注意:有些命令在不知一个章节中存放帮助手册(whereis read),要查看指定章节中的手册: man # command</li></ul><h4 id="9-4-history命令"><a href="#9-4-history命令" class="headerlink" title="9.4 history命令"></a>9.4 history命令</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 命令文件存放于~/.bash_history中,history命令显示的记录(cache中)会在logout时写入~/.bash_history</span></span><br><span class="line">history -a: 将缓存中的命令追加于文件中</span><br><span class="line">history -d offset: 删除offset处的命令(cache中)</span><br><span class="line">history -c: 删除所有(cache中)</span><br><span class="line"></span><br><span class="line">!<span class="comment">#: 调用历史中第#条命令</span></span><br><span class="line">!command: 调用历史中以command开始的命令</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-编程层次&quot;&gt;&lt;a href=&quot;#1-编程层次&quot; class=&quot;headerlink&quot; title=&quot;1. 编程层次&quot;&gt;&lt;/a&gt;1. 编程层次&lt;/h3&gt;&lt;p&gt;硬件规格(Hardware Specification)&lt;br&gt;系统调用(System Call)&lt;br
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>laravel总结</title>
    <link href="http://yoursite.com/2018/09/26/laravel%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2018/09/26/laravel总结/</id>
    <published>2018-09-26T06:19:52.000Z</published>
    <updated>2018-10-10T04:11:54.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-目录结构"><a href="#1-目录结构" class="headerlink" title="1.目录结构"></a>1.目录结构</h3><h3 id="2-路由"><a href="#2-路由" class="headerlink" title="2.路由"></a>2.路由</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Route::get/post/put/patch/delete/options($uri, $callback);</span><br><span class="line">Route::match([<span class="string">'get'</span>, <span class="string">'post'</span>], <span class="string">'/test'</span>, $callback);</span><br><span class="line">Route::any(<span class="string">'/test'</span>, $callback);</span><br><span class="line"><span class="comment">//参数</span></span><br><span class="line">Route::get(<span class="string">'user/&#123;id&#125;'</span>, <span class="function"><span class="keyword">function</span><span class="params">($id)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"User "</span>.$id;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//可选参数(默认值)</span></span><br><span class="line">Route::get(<span class="string">'user/&#123;id?&#125;'</span>, <span class="function"><span class="keyword">function</span><span class="params">($id=null)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"User "</span>.$id;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//正则筛选</span></span><br><span class="line">Route::get(<span class="string">'user/&#123;id?&#125;'</span>, <span class="function"><span class="keyword">function</span><span class="params">($id=null)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"User "</span>.$id;</span><br><span class="line">&#125;)-&gt;where(<span class="string">'id'</span>, <span class="string">'[0-9]+'</span>); <span class="comment">//id为int型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//控制器</span></span><br><span class="line">Route::get(<span class="string">'user/&#123;id&#125;'</span>, <span class="string">'Admin\IndexController@index'</span>);</span><br><span class="line"><span class="comment">//命令行创建控制器</span></span><br><span class="line">php artisan make:controller Admin/IndexController</span><br><span class="line"></span><br><span class="line"><span class="comment">//路由命名</span></span><br><span class="line">Route::get(<span class="string">'user'</span>, [<span class="string">'as'</span> =&gt; <span class="string">'profile'</span>,  <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> route(<span class="string">'profile'</span>); <span class="comment">//http://192.168.200.128/user(地址)</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"路由命名"</span>;</span><br><span class="line">&#125;]);</span><br><span class="line"><span class="comment">//在控制器中也可使用route(),view()函数</span></span><br><span class="line">Route::get(<span class="string">'user'</span>, [<span class="string">'as'</span> =&gt; <span class="string">'profile'</span>,  <span class="string">'uses'</span> =&gt; <span class="string">'Admin\IndexController@index'</span>]);</span><br><span class="line">Route::get(<span class="string">'user'</span>, <span class="string">'Admin\IndexController@index'</span>)-&gt;name(<span class="string">'profile'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//路由分组，访问http://192.168.200.128/admin/login会路由到Admin\IndexController@login方法</span></span><br><span class="line">Route::group([<span class="string">'prefix'</span> =&gt; <span class="string">'admin'</span>, <span class="string">'namespace'</span> =&gt; <span class="string">'Admin'</span>], <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Route::get(<span class="string">'login'</span>, <span class="string">'IndexController@login'</span>);</span><br><span class="line">    Route::get(<span class="string">'index'</span>, <span class="string">'IndexController@index'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//资源路由,自动生成article/create(index/delete)等方法</span></span><br><span class="line">Route::resource(<span class="string">'article'</span>, <span class="string">'Admin\ArticleController'</span>);</span><br></pre></td></tr></table></figure><h3 id="3-中间件-路由前过滤作用"><a href="#3-中间件-路由前过滤作用" class="headerlink" title="3.中间件(路由前过滤作用)"></a>3.中间件(路由前过滤作用)</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//命令生成中间件,在app/Http/Middleware中生成AdminLogin.php中间件文件</span></span><br><span class="line">php artisan make:middleware AdminLogin</span><br><span class="line"><span class="comment">//App\Http\Kernel中追加:</span></span><br><span class="line"><span class="keyword">protected</span> $routeMiddleware = [</span><br><span class="line">        <span class="string">'admin.login'</span> =&gt; \App\Http\Middleware\AdminLogin::class,</span><br><span class="line">];</span><br><span class="line"><span class="comment">//路由中使用:</span></span><br><span class="line">Route::group([<span class="string">'middleware'</span> =&gt; [<span class="string">'admin.login'</span>]], <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Route::get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        session([<span class="string">'key'</span> =&gt; <span class="number">123</span>]);</span><br><span class="line">        <span class="keyword">return</span> view(<span class="string">'welcome'</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="4-视图"><a href="#4-视图" class="headerlink" title="4.视图"></a>4.视图</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.分配视图并传参(一般传递数组)</span></span><br><span class="line"><span class="keyword">return</span> view(<span class="string">'index'</span>)-&gt;with(<span class="string">'name'</span>, $name)-&gt;with(<span class="string">'age'</span>, $age);</span><br><span class="line">$data = [</span><br><span class="line">    <span class="string">'name'</span> =&gt; <span class="string">'haha'</span>,</span><br><span class="line">    <span class="string">'age'</span> =&gt; <span class="number">5</span></span><br><span class="line">];</span><br><span class="line"><span class="keyword">return</span> view(<span class="string">'index'</span>, $data);</span><br><span class="line"><span class="comment">//多参数:</span></span><br><span class="line">$title = <span class="string">"thie is a title"</span>;</span><br><span class="line"><span class="keyword">return</span> view(<span class="string">'index'</span>, compact(<span class="string">'data'</span>,<span class="string">'title'</span>));</span><br><span class="line"><span class="comment">//参数使用(模板中)</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $data[<span class="string">'name'</span>].<span class="string">'----'</span>.$title;  <span class="meta">?&gt;</span></span><br><span class="line"><span class="comment">//使用blade模板引擎(用@屏蔽),默认值(传值为null时)用or创建</span></span><br><span class="line">&#123;&#123;$data[<span class="string">'name'</span>]&#125;&#125;---&#123;&#123;title <span class="keyword">or</span> <span class="string">'XXX'</span>&#125;&#125;</span><br><span class="line"><span class="comment">//不转实体</span></span><br><span class="line">&#123;!! $script !!&#125;</span><br><span class="line"><span class="comment">//判断变量是否存在</span></span><br><span class="line">&#123;&#123;<span class="keyword">isset</span>($name) ? $name : <span class="string">'default'</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//blade模板引擎 if(unless),foreach,for,forelse,@include</span></span><br><span class="line">@<span class="keyword">if</span>()</span><br><span class="line">....</span><br><span class="line">@<span class="keyword">else</span></span><br><span class="line">....</span><br><span class="line">@<span class="keyword">endif</span></span><br><span class="line">@<span class="keyword">for</span>()</span><br><span class="line">....</span><br><span class="line">@<span class="keyword">endfor</span></span><br><span class="line">@<span class="keyword">foreach</span>()</span><br><span class="line">.....</span><br><span class="line">@<span class="keyword">endforeach</span></span><br><span class="line">@forelse()</span><br><span class="line">...</span><br><span class="line">@<span class="keyword">empty</span></span><br><span class="line">....</span><br><span class="line">@endforelse</span><br><span class="line">@<span class="keyword">include</span>(<span class="string">'common.header'</span>, [<span class="string">'page'</span> =&gt; <span class="string">'首页'</span>]) <span class="comment">//引入公共部分,第二个参数可没有</span></span><br><span class="line">@<span class="keyword">yield</span>(<span class="string">'content'</span>) <span class="comment">//公共模板中引入content部分</span></span><br><span class="line">    <span class="comment">//子视图中</span></span><br><span class="line">    @extends(<span class="string">'layouts.home'</span>) <span class="comment">//引入公共文件</span></span><br><span class="line">    @section(<span class="string">'content'</span>)</span><br><span class="line">    @endsection</span><br></pre></td></tr></table></figure><h3 id="5-配置读取及数据库"><a href="#5-配置读取及数据库" class="headerlink" title="5.配置读取及数据库"></a>5.配置读取及数据库</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">config(<span class="string">'database.connections.mysql.prefix'</span>)</span><br><span class="line"></span><br><span class="line">$pdo = DB::connection()-&gt;getPdo();</span><br><span class="line">dd($pdo); <span class="comment">//类似于print_r()</span></span><br><span class="line"></span><br><span class="line">$users = DB::table(<span class="string">'user'</span>)-&gt;where(<span class="string">'user_id'</span>, <span class="string">'&gt;'</span>, <span class="number">1</span>)-&gt;get();</span><br><span class="line">dd($users);</span><br></pre></td></tr></table></figure><h3 id="6-模型"><a href="#6-模型" class="headerlink" title="6.模型"></a>6.模型</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接收数据</span></span><br><span class="line">/$input = Input::all();</span><br><span class="line"></span><br><span class="line"><span class="comment">//新建</span></span><br><span class="line">php artisan make:model User</span><br><span class="line"><span class="comment">//模型中配置表和主键</span></span><br><span class="line"><span class="keyword">protected</span> $table = <span class="string">"user"</span>;</span><br><span class="line"><span class="keyword">protected</span> $primaryKey = <span class="string">'user_id'</span>;</span><br><span class="line"><span class="comment">//控制器中使用模型</span></span><br><span class="line">$user = User::find(<span class="number">1</span>);</span><br><span class="line">$user-&gt;user_name = <span class="string">'wangwu'</span>;</span><br><span class="line">$user-&gt;update(); <span class="comment">//更新</span></span><br><span class="line"><span class="comment">//禁用updated_at字段</span></span><br><span class="line"><span class="keyword">public</span> $timestamps = <span class="keyword">false</span>;</span><br><span class="line"><span class="comment">//非递增主键</span></span><br><span class="line"><span class="keyword">public</span> $incrementing = <span class="keyword">false</span>;</span><br><span class="line"><span class="comment">//主键为字符串而非int型</span></span><br><span class="line"><span class="keyword">protected</span> $keyType = string;</span><br><span class="line"><span class="comment">//禁用updated_at,created_at字段</span></span><br><span class="line"><span class="keyword">public</span> $timestamps = <span class="keyword">false</span>;</span><br><span class="line"><span class="comment">//自定义时间戳</span></span><br><span class="line"><span class="keyword">const</span> CREATED_AT = <span class="string">'creation_data'</span>;</span><br><span class="line"><span class="keyword">const</span> UPDATED_AT = <span class="string">'last_update'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以被批量赋值的属性,只有批量赋值的属性才可通过create()添加数据</span></span><br><span class="line"><span class="keyword">protected</span> $fillable = [<span class="string">'name'</span>]; <span class="comment">//允许name属性可以批量赋值</span></span><br><span class="line"><span class="comment">//不可以批量赋值的属性</span></span><br><span class="line"><span class="keyword">protected</span> $guarded = [<span class="string">'price'</span>];</span><br><span class="line">$flight = Flight::create([<span class="string">'name'</span> =&gt; <span class="string">'Flight 10'</span>]);</span><br><span class="line"><span class="comment">//已有模型</span></span><br><span class="line">$flight-&gt;fill([<span class="string">'name'</span> =&gt; <span class="string">'Flight 22'</span>]);</span><br><span class="line"></span><br><span class="line">$user = User::all(); <span class="comment">//返回模型表中所有的结果</span></span><br><span class="line"></span><br><span class="line">$user = User::where(<span class="string">'active'</span>, <span class="number">1</span>)</span><br><span class="line">              -&gt;orderBy(<span class="string">'name'</span>, <span class="string">'desc'</span>)</span><br><span class="line">              -&gt;take(<span class="number">10</span>)  <span class="comment">//take相当于limit,skip相当于offset</span></span><br><span class="line">              -&gt;get();</span><br><span class="line"></span><br><span class="line">$user = User::where(<span class="string">'active'</span>, <span class="number">1</span>)-&gt;first(); <span class="comment">//first相当于find</span></span><br><span class="line">$user = User::find([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">//聚合函数</span></span><br><span class="line">$count = User::where(<span class="string">'active'</span>, <span class="number">1</span>)-&gt;count();</span><br><span class="line">$price = User::where(<span class="string">'active'</span>, <span class="number">1</span>)-&gt;max(<span class="string">'price'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//插入</span></span><br><span class="line">$user = <span class="keyword">new</span> User;</span><br><span class="line">$user-&gt;name = $name;</span><br><span class="line">$user-&gt;save();</span><br><span class="line"></span><br><span class="line"><span class="comment">//更新</span></span><br><span class="line">$flight = Flight::find(<span class="number">1</span>);</span><br><span class="line">$flight-&gt;name = <span class="string">'New'</span>;</span><br><span class="line">$flight-&gt;save();</span><br><span class="line">Flight::where(<span class="string">'active'</span>, <span class="number">1</span>)</span><br><span class="line">   -&gt;where(<span class="string">'destination'</span>, <span class="string">'San Diego'</span>)</span><br><span class="line">   -&gt;update([<span class="string">'delay'</span> =&gt; <span class="number">1</span>]); <span class="comment">//需要传入键值对数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//删除</span></span><br><span class="line">$flight = Flight::find(<span class="number">1</span>);</span><br><span class="line">$flight-&gt;delete();</span><br><span class="line">Flight::destroy(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">Flight::destroy([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);</span><br><span class="line">$deletedRows = Flight::where(<span class="string">'active'</span>, <span class="number">0</span>)-&gt;delete();</span><br></pre></td></tr></table></figure><h3 id="7-清除缓存"><a href="#7-清除缓存" class="headerlink" title="7.清除缓存"></a>7.清除缓存</h3><h4 id="7-1-清除视图缓存"><a href="#7-1-清除视图缓存" class="headerlink" title="7.1 清除视图缓存"></a>7.1 清除视图缓存</h4><p>php artisan view:clear</p><h4 id="7-2-清除运行缓存"><a href="#7-2-清除运行缓存" class="headerlink" title="7.2 清除运行缓存"></a>7.2 清除运行缓存</h4><p>php artisan cache:clear</p><h4 id="7-3-清除配置缓存"><a href="#7-3-清除配置缓存" class="headerlink" title="7.3 清除配置缓存"></a>7.3 清除配置缓存</h4><p>php artisan config:clear</p><h3 id="8-方法"><a href="#8-方法" class="headerlink" title="8.方法"></a>8.方法</h3><p>//引入静态文件<br>asset()<br>//引入地址<br>url()<br>//返回到前一个页面<br>back()<br>//参数传递<br>with()<br>//加解密<br>Crypt::encrypt($str)<br>Crypt::decrypt($str)<br>//重定向<br>redirect($url);</p><h3 id="9-request"><a href="#9-request" class="headerlink" title="9.request"></a>9.request</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*基于Illuminate\Http\Request</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//获取所有参数并放于数组中</span></span><br><span class="line">$request-&gt;all();</span><br><span class="line"><span class="comment">//获取相应字段,get,post等均可</span></span><br><span class="line">$request-&gt;input(<span class="string">'name'</span>, <span class="string">'lizengcai'</span>); <span class="comment">//第二个参数用于默认值</span></span><br><span class="line">$request-&gt;input(<span class="string">'products.*.name'</span>);  <span class="comment">//获取数组的值</span></span><br><span class="line">$request-&gt;has(<span class="string">'name'</span>);  <span class="comment">//数据存在返回true</span></span><br><span class="line">$request-&gt;only([<span class="string">'name'</span>, <span class="string">'post'</span>]);</span><br><span class="line">$request-&gt;except(<span class="string">'name'</span>);  <span class="comment">//接收部分参数,参数可以为数组或字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//路由参数接收</span></span><br><span class="line">$api-&gt;post(<span class="string">'test/&#123;id&#125;'</span>, [ <span class="comment">//路由</span></span><br><span class="line">                <span class="string">'as'</span> =&gt; <span class="string">'test.index'</span>,</span><br><span class="line">                <span class="string">'uses'</span> =&gt; <span class="string">'TestController@index'</span>,</span><br><span class="line">        ]);</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">(Request $request, $id)</span></span>&#123;&#125;<span class="comment">//controller方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//以http://laravel_api.com/api/test/3?b=c为例</span></span><br><span class="line"><span class="comment">//返回请求的uri</span></span><br><span class="line">$uri = $request-&gt;path();  <span class="comment">//  /api/test/3</span></span><br><span class="line"><span class="comment">//对uri进行匹配</span></span><br><span class="line">$request-&gt;is(<span class="string">'api/*'</span>);   <span class="comment">//  true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//完整网址</span></span><br><span class="line">$url = $request-&gt;url();   <span class="comment">//  http://laravel_api.com/api/test/3</span></span><br><span class="line">$fullUrl = $request-&gt;fullUrl();   <span class="comment">//http://laravel_api.com/api/test/3?b=c</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//方法</span></span><br><span class="line">$method = $request-&gt;method();    <span class="comment">//post</span></span><br><span class="line">$request-&gt;isMethod(<span class="string">'post'</span>);    <span class="comment">//true</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-目录结构&quot;&gt;&lt;a href=&quot;#1-目录结构&quot; class=&quot;headerlink&quot; title=&quot;1.目录结构&quot;&gt;&lt;/a&gt;1.目录结构&lt;/h3&gt;&lt;h3 id=&quot;2-路由&quot;&gt;&lt;a href=&quot;#2-路由&quot; class=&quot;headerlink&quot; title=&quot;2
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>$明朝那些事$总结</title>
    <link href="http://yoursite.com/2018/09/20/%E6%98%8E%E6%9C%9D%E9%82%A3%E4%BA%9B%E4%BA%8B-%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2018/09/20/明朝那些事-总结/</id>
    <published>2018-09-20T14:53:57.000Z</published>
    <updated>2018-09-27T02:26:36.000Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>php-fpm总结</title>
    <link href="http://yoursite.com/2018/09/08/php-fpm%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2018/09/08/php-fpm总结/</id>
    <published>2018-09-07T16:01:18.000Z</published>
    <updated>2018-09-12T09:02:07.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-etc-init-d和-etc-rc-local"><a href="#1-etc-init-d和-etc-rc-local" class="headerlink" title="1. /etc/init.d和/etc/rc.local"></a>1. /etc/init.d和/etc/rc.local</h3><p>/etc/init.d: 系统进程管理,command有start,stop,restart,reload等<br>/etc/rc.local: 开机启动</p><h3 id="2-etc-init-d-php-fpm脚本内容"><a href="#2-etc-init-d-php-fpm脚本内容" class="headerlink" title="2. /etc/init.d/php-fpm脚本内容"></a>2. /etc/init.d/php-fpm脚本内容</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Startup script for the PHP-FPM server.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># chkconfig: 345 85 15</span></span><br><span class="line"><span class="comment"># description: PHP is an HTML-embedded scripting language</span></span><br><span class="line"><span class="comment"># processname: php-fpm</span></span><br><span class="line"><span class="comment"># config: /usr/local/php/etc/php.ini</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Source function library.</span></span><br><span class="line">. /etc/rc.d/init.d/functions</span><br><span class="line"></span><br><span class="line">PHP_PATH=/usr/local</span><br><span class="line">DESC=<span class="string">"php-fpm daemon"</span></span><br><span class="line">NAME=php-fpm</span><br><span class="line">NAME1=php-fpm-www1</span><br><span class="line">NAME2=php-fpm-www2</span><br><span class="line"><span class="comment"># php-fpm路径</span></span><br><span class="line">DAEMON=$PHP_PATH/php/sbin/$NAME</span><br><span class="line"><span class="comment"># 配置文件路径</span></span><br><span class="line">CONFIGFILE1=$PHP_PATH/php/etc/$NAME1.conf</span><br><span class="line">CONFIGFILE2=$PHP_PATH/php/etc/$NAME2.conf</span><br><span class="line"><span class="comment"># PID文件路径(在php-fpm.conf设置)</span></span><br><span class="line">PIDFILE1=$PHP_PATH/php/<span class="keyword">var</span>/run/$NAME1.pid</span><br><span class="line">PIDFILE2=$PHP_PATH/php/<span class="keyword">var</span>/run/$NAME2.pid</span><br><span class="line">SCRIPTNAME=/etc/init.d/$NAME</span><br><span class="line"></span><br><span class="line"><span class="comment"># Gracefully exit if the package has been removed.</span></span><br><span class="line">test -x $DAEMON || <span class="keyword">exit</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">rh_start() &#123;</span><br><span class="line">  $DAEMON -y $CONFIGFILE1 || <span class="keyword">echo</span> -e <span class="string">" already running"</span></span><br><span class="line">  $DAEMON -y $CONFIGFILE2 || <span class="keyword">echo</span> -e <span class="string">" already running"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rh_stop() &#123;</span><br><span class="line">  kill -QUIT `cat $PIDFILE1` || <span class="keyword">echo</span> -e <span class="string">" not running"</span></span><br><span class="line">  kill -QUIT `cat $PIDFILE2` || <span class="keyword">echo</span> -e <span class="string">" not running"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rh_reload() &#123;</span><br><span class="line">  kill -HUP `cat $PIDFILE1` || <span class="keyword">echo</span> -e <span class="string">" can't reload"</span></span><br><span class="line">  kill -HUP `cat $PIDFILE2` || <span class="keyword">echo</span> -e <span class="string">" can't reload"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">"$1"</span> in</span><br><span class="line">  start)</span><br><span class="line">        <span class="keyword">echo</span> -e <span class="string">"Starting $DESC: $NAME1"</span></span><br><span class="line">        <span class="keyword">echo</span> -e <span class="string">"Starting $DESC: $NAME2"</span></span><br><span class="line">        rh_start</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"."</span></span><br><span class="line">        ;;</span><br><span class="line">  stop)</span><br><span class="line">        <span class="keyword">echo</span> -e <span class="string">"Stopping $DESC: $NAME1"</span></span><br><span class="line">        <span class="keyword">echo</span> -e <span class="string">"Stopping $DESC: $NAME2"</span></span><br><span class="line">        rh_stop</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"."</span></span><br><span class="line">        ;;</span><br><span class="line">  reload)</span><br><span class="line">        <span class="keyword">echo</span> -e <span class="string">"Reloading $DESC configuration..."</span></span><br><span class="line">        rh_reload</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"reloaded."</span></span><br><span class="line">  ;;</span><br><span class="line">  restart)</span><br><span class="line">        <span class="keyword">echo</span> -e <span class="string">"Restarting $DESC: $NAME1"</span></span><br><span class="line">        <span class="keyword">echo</span> -e <span class="string">"Restarting $DESC: $NAME2"</span></span><br><span class="line">        rh_stop</span><br><span class="line">        sleep <span class="number">1</span></span><br><span class="line">        rh_start</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"."</span></span><br><span class="line">        ;;</span><br><span class="line">  *)</span><br><span class="line">         <span class="keyword">echo</span> <span class="string">"Usage: $SCRIPTNAME &#123;start|stop|restart|reload&#125;"</span> &gt;&amp;<span class="number">2</span></span><br><span class="line">         <span class="keyword">exit</span> <span class="number">3</span></span><br><span class="line">        ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><h3 id="3-配置"><a href="#3-配置" class="headerlink" title="3. 配置"></a>3. 配置</h3><h4 id="3-1-php-fpm-www1-conf"><a href="#3-1-php-fpm-www1-conf" class="headerlink" title="3.1 php-fpm-www1.conf"></a>3.1 php-fpm-www1.conf</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">global</span>]</span><br><span class="line">pid = /usr/local/php/<span class="keyword">var</span>/run/php-fpm-www1.pid</span><br><span class="line">error_log =/usr/local/php/<span class="keyword">var</span>/log/php-fpm-www1.log</span><br><span class="line"></span><br><span class="line">; Possible Values: alert, error, warning, notice, debug</span><br><span class="line">log_level = warning</span><br><span class="line"></span><br><span class="line">emergency_restart_threshold = <span class="number">10</span></span><br><span class="line">emergency_restart_interval = <span class="number">60</span>s</span><br><span class="line"></span><br><span class="line">process_control_timeout = <span class="number">5</span>s</span><br><span class="line">process.max = <span class="number">2048</span></span><br><span class="line"></span><br><span class="line">daemonize = yes</span><br><span class="line">rlimit_files = <span class="number">65536</span></span><br><span class="line">rlimit_core = <span class="number">0</span></span><br><span class="line">events.mechanism = epoll</span><br><span class="line">; <span class="keyword">Default</span> value: <span class="number">10</span></span><br><span class="line">;systemd_interval = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">[www1]</span><br><span class="line">user = www</span><br><span class="line">group = www</span><br><span class="line">;fpm监听端口/套接字,/dev/shm是个tmpfs,速度比磁盘快的多</span><br><span class="line">listen = /dev/shm/php5-fpm-www1.sock</span><br><span class="line">listen.backlog = <span class="number">65535</span></span><br><span class="line">;运行用户</span><br><span class="line">listen.owner = www</span><br><span class="line">;运行组</span><br><span class="line">listen.group = www</span><br><span class="line">;运行用户和组所使用的权限</span><br><span class="line">listen.mode = <span class="number">0660</span></span><br><span class="line"></span><br><span class="line">;子进程数固定</span><br><span class="line">pm = <span class="keyword">static</span></span><br><span class="line">;进程数量(<span class="keyword">static</span>)/最大数量(dynamic)</span><br><span class="line">pm.max_children = <span class="number">200</span></span><br><span class="line"></span><br><span class="line">;多久后空闲结束进程,仅当pm设置为ondemand时有效</span><br><span class="line">pm.process_idle_timeout = <span class="number">30</span>s</span><br><span class="line">;子进程重生之前服务的请求数量</span><br><span class="line">pm.max_requests = <span class="number">20000</span></span><br><span class="line"></span><br><span class="line">; The access log file</span><br><span class="line">; <span class="keyword">Default</span>: not set</span><br><span class="line">access.log = /usr/local/php/<span class="keyword">var</span>/log/$pool.access.log</span><br><span class="line"></span><br><span class="line">slowlog = /usr/local/php/<span class="keyword">var</span>/log/$pool.log.slow</span><br><span class="line">request_slowlog_timeout = <span class="number">5</span>s</span><br><span class="line">request_terminate_timeout = <span class="number">3</span>m</span><br><span class="line">rlimit_files = <span class="number">65000</span></span><br><span class="line"></span><br><span class="line">;使用 php_admin_value 或者 php_admin_flag 定义的值，不能被 PHP 代码中的 ini_set() 覆盖</span><br><span class="line">php_admin_value[error_log] = /usr/local/php/<span class="keyword">var</span>/log/fpm-php.www1.log</span><br><span class="line">;重定向运行过程中的 stdout 和 stderr 到主要的错误日志文件中。如果没有设置，stdout 和 stderr 将会根据 FastCGI 的规则被重定向到 /dev/<span class="keyword">null</span>。默认值：无。</span><br><span class="line">catch_workers_output = yes</span><br></pre></td></tr></table></figure><h4 id="3-2-php-fpm-www2-conf"><a href="#3-2-php-fpm-www2-conf" class="headerlink" title="3.2 php-fpm-www2.conf"></a>3.2 php-fpm-www2.conf</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">global</span>]</span><br><span class="line">pid = /usr/local/php/<span class="keyword">var</span>/run/php-fpm-www2.pid</span><br><span class="line">error_log =/usr/local/php/<span class="keyword">var</span>/log/php-fpm-www2.log</span><br><span class="line"></span><br><span class="line">; Possible Values: alert, error, warning, notice, debug</span><br><span class="line">log_level = warning</span><br><span class="line"></span><br><span class="line">emergency_restart_threshold = <span class="number">10</span></span><br><span class="line">emergency_restart_interval = <span class="number">60</span>s</span><br><span class="line"></span><br><span class="line">process_control_timeout = <span class="number">10</span>s</span><br><span class="line">process.max = <span class="number">2048</span></span><br><span class="line"></span><br><span class="line">daemonize = yes</span><br><span class="line">rlimit_files = <span class="number">65536</span></span><br><span class="line">rlimit_core = <span class="number">0</span></span><br><span class="line">events.mechanism = epoll</span><br><span class="line">; <span class="keyword">Default</span> value: <span class="number">10</span></span><br><span class="line">;systemd_interval = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">[www2]</span><br><span class="line">user = www</span><br><span class="line">group = www</span><br><span class="line">listen = /dev/shm/php5-fpm-www2.sock</span><br><span class="line">listen.backlog = <span class="number">65535</span></span><br><span class="line">listen.owner = www</span><br><span class="line">listen.group = www</span><br><span class="line">listen.mode = <span class="number">0660</span></span><br><span class="line"></span><br><span class="line">pm = <span class="keyword">static</span></span><br><span class="line">pm.max_children = <span class="number">200</span></span><br><span class="line"></span><br><span class="line">pm.process_idle_timeout = <span class="number">30</span>s</span><br><span class="line">pm.max_requests = <span class="number">20000</span></span><br><span class="line"></span><br><span class="line">; The access log file</span><br><span class="line">; <span class="keyword">Default</span>: not set</span><br><span class="line">access.log = /usr/local/php/<span class="keyword">var</span>/log/$pool.access.log</span><br><span class="line"></span><br><span class="line">slowlog = /usr/local/php/<span class="keyword">var</span>/log/$pool.log.slow</span><br><span class="line">request_slowlog_timeout = <span class="number">5</span>s</span><br><span class="line">request_terminate_timeout = <span class="number">3</span>m</span><br><span class="line">rlimit_files = <span class="number">65000</span></span><br><span class="line"></span><br><span class="line">php_admin_value[error_log] = /usr/local/php/<span class="keyword">var</span>/log/fpm-php.www2.log</span><br><span class="line">catch_workers_output = yes</span><br></pre></td></tr></table></figure><h4 id="3-3-rc-local"><a href="#3-3-rc-local" class="headerlink" title="3.3 rc.local"></a>3.3 rc.local</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/php-fpm start <span class="comment">#追加</span></span><br></pre></td></tr></table></figure><h3 id="4-配置解析"><a href="#4-配置解析" class="headerlink" title="4.配置解析"></a>4.配置解析</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-etc-init-d和-etc-rc-local&quot;&gt;&lt;a href=&quot;#1-etc-init-d和-etc-rc-local&quot; class=&quot;headerlink&quot; title=&quot;1. /etc/init.d和/etc/rc.local&quot;&gt;&lt;/a&gt;1. /et
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>vim总结</title>
    <link href="http://yoursite.com/2018/09/04/vim%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2018/09/04/vim总结/</id>
    <published>2018-09-04T08:38:11.000Z</published>
    <updated>2018-09-05T10:35:36.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-树形目录插件NERDTree"><a href="#1-树形目录插件NERDTree" class="headerlink" title="1. 树形目录插件NERDTree"></a>1. 树形目录插件NERDTree</h3><p><br></p><h4 id="1-1-下载及安装"><a href="#1-1-下载及安装" class="headerlink" title="1.1 下载及安装"></a>1.1 下载及安装</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="comment">//www.vim.org/scripts/download_script.php?src_id=17123 -O nerdtree.zip </span></span><br><span class="line">unzip nerdtree.zip</span><br><span class="line"> </span><br><span class="line">mkdir -p ~/.vim/&#123;plugin,doc&#125;</span><br><span class="line"> </span><br><span class="line">cp plugin/NERD_tree.vim ~/.vim/plugin/</span><br><span class="line">cp doc/NERD_tree.txt ~/.vim/doc/</span><br></pre></td></tr></table></figure><h4 id="1-2-使用"><a href="#1-2-使用" class="headerlink" title="1.2 使用"></a>1.2 使用</h4><p>安装好后,直接在vim中输入:NERDTree,即可看到目录结构.</p><h4 id="1-3-快捷方式配置"><a href="#1-3-快捷方式配置" class="headerlink" title="1.3 快捷方式配置"></a>1.3 快捷方式配置</h4><p>在~/.vimrc中添加一下内容:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"按F3即可显示/隐藏目录</span></span><br><span class="line"><span class="string">map &lt;F3&gt; :NERDTreeMirror&lt;CR&gt;</span></span><br><span class="line"><span class="string">map &lt;F3&gt; :NERDTreeToggle&lt;CR&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="2-设置选项"><a href="#2-设置选项" class="headerlink" title="2. 设置选项"></a>2. 设置选项</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">help <span class="string">'option'</span>: 搜索设置选项(option可为hls,is等)</span><br><span class="line">set showmode/noshowmode: 设置是否显示模式</span><br><span class="line">set hls/hlsearch(highlight search): 设置高亮</span><br><span class="line">set is/incsearch(incurrent search): 实时显示</span><br><span class="line">set ic/ignorecase: 忽略大小写</span><br><span class="line">set ruler: 右下角显示光标的位置</span><br></pre></td></tr></table></figure><h3 id="3-常用按键设置"><a href="#3-常用按键设置" class="headerlink" title="3. 常用按键设置"></a>3. 常用按键设置</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">x/X:删除光标下/光标前的字符</span><br><span class="line">i/a/A:在光标之前/之后/词尾插入</span><br><span class="line">diw/daw/dw:(删除光标所在的字符,不包括/包括空白字符)/(删除从光标开始到下个单词词首的所有)</span><br><span class="line">D:删除导航为的内容</span><br><span class="line">I/A:在当前行首/行尾插入</span><br><span class="line">w/e/b/ge:(下个单词词首/词尾)/(上个单词词首/词尾)</span><br><span class="line"><span class="number">0</span>/^:移动到行首/非空行首</span><br><span class="line"><span class="number">2</span>$:光标移动到下一行的行尾</span><br><span class="line">[number]f/F+character:当前行向左/向右查找字符并移动到字符位置,可以通过;/,来向后/向前重复移动</span><br><span class="line">H/M/L:移动到所见内容的(屏幕内)首部,中部,尾部</span><br><span class="line">zb/zz/zt:光标所在的行移动到底部/中部/顶部</span><br><span class="line">*/<span class="comment">#: 光标所在单词取出并作为向前/向后查找对象</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-树形目录插件NERDTree&quot;&gt;&lt;a href=&quot;#1-树形目录插件NERDTree&quot; class=&quot;headerlink&quot; title=&quot;1. 树形目录插件NERDTree&quot;&gt;&lt;/a&gt;1. 树形目录插件NERDTree&lt;/h3&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;
&lt;h4
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>js总结</title>
    <link href="http://yoursite.com/2018/08/28/js%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2018/08/28/js总结/</id>
    <published>2018-08-28T05:53:51.000Z</published>
    <updated>2018-08-28T05:54:49.000Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>redis总结</title>
    <link href="http://yoursite.com/2018/08/18/redis%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2018/08/18/redis总结/</id>
    <published>2018-08-18T03:56:29.000Z</published>
    <updated>2018-09-19T03:08:50.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-what-is-redis"><a href="#1-what-is-redis" class="headerlink" title="1.what is redis?"></a>1.what is redis?</h3><p>Redis is an open source (BSD licensed), in-memory data structure store, used as a database, cache and message broker. It supports data structures such as strings, hashes, lists, sets, sorted sets with range queries, bitmaps, hyperloglogs and geospatial indexes with radius queries.</p><blockquote><p>redis和memcache的独特之处：</p><p><1>redis可以用来做存储(storage),而memcache只能用来做存储(cache)[这个特性源于redis的持久化功能]</1></p><p><2>memcache只能存储strings类型的数据,而redis可以存储strings,hashes,lists,sets,sorted set等数据</2></p></blockquote><h3 id="2-下载及安装"><a href="#2-下载及安装" class="headerlink" title="2.下载及安装"></a>2.下载及安装</h3><p>下载地址: <a href="http://redis.io" target="_blank" rel="noopener">redis官网</a><br>安装:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//必要环境: </span></span><br><span class="line">yum -y install gcc tcl    <span class="comment">//tcl用于make test</span></span><br><span class="line">make</span><br><span class="line">make install PREFIX=/usr/local/redis</span><br><span class="line">cp  /usr/local/src/redis<span class="number">-4.0</span><span class="number">.11</span>/redis.conf   /usr/local/redis/bin</span><br><span class="line">修改配置:</span><br><span class="line">daemonize yes</span><br><span class="line">启动:</span><br><span class="line">./redis-server redis.conf</span><br></pre></td></tr></table></figure></p><blockquote><p>注意:<br>如make时出现jemalloc/jemalloc.h错误,运行make MALLOC=libc指定分配器为libc即可<br>也可进行jemalloc安装:<br>在<a href="https://github.com/jemalloc/jemalloc/releases下载jemalloc" target="_blank" rel="noopener">https://github.com/jemalloc/jemalloc/releases下载jemalloc</a><br>进行编译安装:./configure –prefix=/usr/local/jemalloc &amp;&amp; make &amp;&amp; make install<br>将jemalloc库写入系统:<br>echo /usr/local/jemalloc/lib &gt;&gt; /etc/ld.so.conf &amp;&amp; ldconfig<br>ok</p></blockquote><h3 id="3-redis目录文件解释"><a href="#3-redis目录文件解释" class="headerlink" title="3.redis目录文件解释"></a>3.redis目录文件解释</h3><blockquote><p>redis-benchmark: redis性能检测工具<br>redis-check-aof: 检查aof日志工具<br>reids-check-dump: 检查rbd日志工具</p></blockquote><h3 id="4-常用操作"><a href="#4-常用操作" class="headerlink" title="4.常用操作"></a>4.常用操作</h3><h4 id="4-1-通用命令"><a href="#4-1-通用命令" class="headerlink" title="4.1 通用命令"></a>4.1 通用命令</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">keys * : 查询所有(s*:查询以s开头的键,?匹配符也支持,sit[e|y]:查询site或sity)</span><br><span class="line">flushall: 清除所有db中的key</span><br><span class="line">flushdb: 清除当前db中的key</span><br><span class="line">randomkey: 返回随机key</span><br><span class="line">type key: 返回key的类型</span><br><span class="line">exists key: 判断key是否存在</span><br><span class="line">del key [key]: 删除key</span><br><span class="line">rename key newkey: 重命名key</span><br><span class="line">renamenx key newkey: 新key存在则不覆盖</span><br><span class="line">move key db: 移动key到新db</span><br><span class="line">select db: 切换db</span><br><span class="line">ttl key: 查询key的生命周期,返回秒数,对于已存在的key[无限期]/不存在的key/过期的key都返回<span class="number">-1</span></span><br><span class="line">expire key int: 设置key的生命周期(秒)</span><br><span class="line">pexpire key int: 设置key的生命周期(毫秒)</span><br><span class="line">pttl key: 查询key的生命周期(毫秒)</span><br><span class="line">persist key: 设置key永久有效</span><br></pre></td></tr></table></figure><h4 id="4-2-String命令"><a href="#4-2-String命令" class="headerlink" title="4.2 String命令"></a>4.2 String命令</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">set key value [ex 秒数]/[px 毫秒数] [nx]/[xx] <span class="comment">//注意ex和px不要同时写,nx:key不存在时执行操作;xx:key存在时执行操作</span></span><br><span class="line">mset key value [key value]: 一次性设置多个键值</span><br><span class="line">mget key [key]: 一次性获取多个键值</span><br><span class="line">setrange key offset value: 替换value</span><br><span class="line">getrange key start end: 获取部分string  <span class="comment">//下标左数从0开始,右数从-1开始</span></span><br><span class="line">append key value: 在key的原value后添加value</span><br><span class="line">getset key: 读取旧值并设置新值</span><br><span class="line">incr/decr key: 加一/减一</span><br><span class="line">incrby/decrby key int:一次加减int</span><br><span class="line">incrby/decrbyfloat key float:一次加减float</span><br><span class="line">setbit key offset value: 偏移量操作(单词大小写相差<span class="number">32</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-what-is-redis&quot;&gt;&lt;a href=&quot;#1-what-is-redis&quot; class=&quot;headerlink&quot; title=&quot;1.what is redis?&quot;&gt;&lt;/a&gt;1.what is redis?&lt;/h3&gt;&lt;p&gt;Redis is an open
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>go深入</title>
    <link href="http://yoursite.com/2018/08/15/go%E6%B7%B1%E5%85%A5/"/>
    <id>http://yoursite.com/2018/08/15/go深入/</id>
    <published>2018-08-15T07:43:17.000Z</published>
    <updated>2018-08-17T05:47:41.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-main函数和init函数"><a href="#1-main函数和init函数" class="headerlink" title="1.main函数和init函数"></a>1.main函数和init函数</h3><p>简介:init函数能够在所有的package使用,main函数只能用于package main,这两个函数在定义时不能有任何参数和返回值,每个package中的init函数都是可选的，但package main就必须包含一个main函数。<br><img src="http://resource.cmdapps.com/2018/08/main.init.png"></p><p><center>*main函数引包流程图</center><br>例子:</p><ul><li><p>main.go</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"time"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"net/http"</span></span><br><span class="line">_ <span class="string">"test/test"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">Name = <span class="string">"main"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"I am in %s package.\n"</span>, Name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>test/test.go</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"path/filepath"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"anker"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"I am in test package and my name is %s.\n"</span>, name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-路由绑定与session搭配提供web服务"><a href="#2-路由绑定与session搭配提供web服务" class="headerlink" title="2.路由绑定与session搭配提供web服务"></a>2.路由绑定与session搭配提供web服务</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import <span class="string">"net/http"</span></span><br><span class="line"></span><br><span class="line">func SayHello(w http.ResponseWriter, req *http.Request) &#123;</span><br><span class="line">w.Write([]byte(<span class="string">"hello"</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func ReadCookieServe(w http.ResponseWriter, req *http.Request) &#123;</span><br><span class="line">cookie, err := req.Cookie(<span class="string">"testcookiename"</span>)</span><br><span class="line"><span class="keyword">if</span> err == nil &#123;</span><br><span class="line">cookievalue := cookie.Value</span><br><span class="line">w.Write([]byte(<span class="string">"&lt;b&gt;cookie的值是:"</span>+cookievalue+<span class="string">"&lt;/b&gt;\n"</span>))</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">w.Write([]byte(<span class="string">"&lt;b&gt;读取出现错误:"</span>+err.Error()+<span class="string">"&lt;/b&gt;\n"</span>))</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func WriteCookieServe(w http.ResponseWriter, req *http.Request) &#123;</span><br><span class="line">cookie := http.Cookie&#123;Name: <span class="string">"testcookiename"</span>, Value: <span class="string">"testcookievalue"</span>, Path: <span class="string">"/"</span>, MaxAge: <span class="number">86400</span>&#125;</span><br><span class="line">http.SetCookie(w, &amp;cookie)</span><br><span class="line">w.Write([]byte(<span class="string">"&lt;b&gt;设置cookie成功!&lt;/b&gt;\n"</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func DeleteCookieServe(w http.ResponseWriter, req *http.Request) &#123;</span><br><span class="line">cookie := http.Cookie&#123;Name: <span class="string">"testcookiename"</span>, Path: <span class="string">"/"</span>, MaxAge: <span class="number">-1</span>&#125;</span><br><span class="line">http.SetCookie(w, &amp;cookie)</span><br><span class="line">w.Write([]byte(<span class="string">"&lt;b&gt;删除cookie成功。&lt;/b&gt;\n"</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">http.HandleFunc(<span class="string">"/"</span>, SayHello)</span><br><span class="line">http.HandleFunc(<span class="string">"/readcookie"</span>, ReadCookieServe)</span><br><span class="line">http.HandleFunc(<span class="string">"/writecookie"</span>, WriteCookieServe)</span><br><span class="line">http.HandleFunc(<span class="string">"/deletecookie"</span>, DeleteCookieServe)</span><br><span class="line"></span><br><span class="line">http.ListenAndServe(<span class="string">":8080"</span>, nil)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-defer深入"><a href="#3-defer深入" class="headerlink" title="3.defer深入"></a>3.defer深入</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line"><span class="string">"time"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func trace(funcName string) func() &#123;</span><br><span class="line">start := time.Now()</span><br><span class="line">fmt.Printf(<span class="string">"function %s enter\n"</span>, funcName)</span><br><span class="line"><span class="keyword">return</span> func() &#123;</span><br><span class="line">fmt.Printf(<span class="string">"function %s exit (elapsed %s)\n"</span>, funcName, time.Since(start))</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func foo() &#123;</span><br><span class="line">defer trace(<span class="string">"foo()"</span>)()  <span class="comment">//defer后面的函数值和参数会被求值但实际的函数调用要等到最后</span></span><br><span class="line">time.Sleep(<span class="number">5</span>*time.Second)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">foo()</span><br><span class="line">foo()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-表单处理"><a href="#4-表单处理" class="headerlink" title="4.表单处理"></a>4.表单处理</h3><p>login.tpl<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">"/login"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">用户名:&lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>&gt;</span><br><span class="line">密码:&lt;input type=<span class="string">"password"</span> name=<span class="string">"password"</span>&gt;</span><br><span class="line">&lt;input type=<span class="string">"submit"</span> value=<span class="string">"登录"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p>main.go<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"html/template"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"net/http"</span></span><br><span class="line"><span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func login(w http.ResponseWriter, r *http.Request) &#123;</span><br><span class="line">fmt.Println(<span class="string">"method:"</span>, r.Method) <span class="comment">//获取请求的方法</span></span><br><span class="line"><span class="keyword">if</span> r.Method == <span class="string">"GET"</span> &#123;</span><br><span class="line">t, _ := template.ParseFiles(<span class="string">"login.gtpl"</span>)</span><br><span class="line">log.Println(t.Execute(w, nil))</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//请求的是登录数据，那么执行登录的逻辑判断</span></span><br><span class="line">fmt.Println(<span class="string">"username:"</span>, r.Form[<span class="string">"username"</span>][<span class="number">0</span>])</span><br><span class="line">fmt.Println(<span class="string">"password:"</span>, r.Form.Get(<span class="string">"password"</span>))</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">http.HandleFunc(<span class="string">"/login"</span>, login)         <span class="comment">//设置访问的路由</span></span><br><span class="line">err := http.ListenAndServe(<span class="string">":8080"</span>, nil) <span class="comment">//设置监听的端口</span></span><br><span class="line"><span class="keyword">if</span> err != nil &#123;</span><br><span class="line">log.Fatal(<span class="string">"ListenAndServe: "</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="5-数据库操作"><a href="#5-数据库操作" class="headerlink" title="5.数据库操作"></a>5.数据库操作</h3><blockquote><p>说明:</p><p><1> go语言没有提供数据库驱动,只提供了接口,常用的mysql数据库驱动为github.com/go-sql-driver/mysql</1></p><p><2> dsn格式: username:password@protocol(address)/dbname?param=value</2></p></blockquote><blockquote><p>函数解释:<br>sql.Open()函数用来打开一个注册过的数据库驱动，go-sql-driver中注册了mysql这个数据库驱动<br>db.Prepare()函数用来返回准备要执行的sql操作，然后返回准备完毕的执行状态。<br>db.Query()函数用来直接执行Sql返回Rows结果。<br>stmt.Exec()函数用来执行stmt准备好的SQL语句</p></blockquote><h4 id="数据表结构"><a href="#数据表结构" class="headerlink" title="数据表结构"></a>数据表结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `userinfo` (</span><br><span class="line">`uid` INT(10) NOT NULL AUTO_INCREMENT,</span><br><span class="line">`username` VARCHAR(64) NULL DEFAULT NULL,</span><br><span class="line">`department` VARCHAR(64) NULL DEFAULT NULL,</span><br><span class="line">`created` DATE NULL DEFAULT NULL,</span><br><span class="line">PRIMARY KEY (`uid`)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE `userdetail` (</span><br><span class="line">`uid` INT(10) NOT NULL DEFAULT &apos;0&apos;,</span><br><span class="line">`intro` TEXT NULL,</span><br><span class="line">`profile` TEXT NULL,</span><br><span class="line">PRIMARY KEY (`uid`)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">_ <span class="string">"github.com/go-sql-driver/mysql"</span></span><br><span class="line"><span class="string">"database/sql"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestDb</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//连接</span></span><br><span class="line">db, err := sql.Open(<span class="string">"mysql"</span>, <span class="string">"root:123456aA@tcp(127.0.0.1:8889)/test1?charset=utf8"</span>) <span class="comment">//打开一个注册过的驱动</span></span><br><span class="line">checkErr(err)</span><br><span class="line"></span><br><span class="line"><span class="comment">//插入数据</span></span><br><span class="line">stmt, _ := db.Prepare(<span class="string">"INSERT `userinfo` SET `username`=?, `department`=?, `created`=?"</span>)</span><br><span class="line">res, _ := stmt.Exec(<span class="string">"anker"</span>, <span class="string">"研发部"</span>, <span class="string">"2018--08-17"</span>) <span class="comment">//insert,update或delete时使用</span></span><br><span class="line">id, _ := res.LastInsertId()</span><br><span class="line">fmt.Println(id)</span><br><span class="line"></span><br><span class="line"><span class="comment">//查询数据</span></span><br><span class="line">rows, _ := db.Query(<span class="string">"SELECT * FROM `userinfo`"</span>)</span><br><span class="line"><span class="keyword">for</span> rows.Next() &#123;</span><br><span class="line"><span class="keyword">var</span> uid <span class="keyword">int</span></span><br><span class="line"><span class="keyword">var</span> username <span class="keyword">string</span></span><br><span class="line"><span class="keyword">var</span> department <span class="keyword">string</span></span><br><span class="line"><span class="keyword">var</span> created <span class="keyword">string</span></span><br><span class="line">err = rows.Scan(&amp;uid, &amp;username, &amp;department, &amp;created)</span><br><span class="line">checkErr(err)</span><br><span class="line">fmt.Println(uid)</span><br><span class="line">fmt.Println(username)</span><br><span class="line">fmt.Println(department)</span><br><span class="line">fmt.Println(created)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkErr</span><span class="params">(err error)</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-orm操作数据库"><a href="#6-orm操作数据库" class="headerlink" title="6.orm操作数据库"></a>6.orm操作数据库</h3><p>采用了Go style方式对数据库进行操作，实现了struct到数据表记录的映射。</p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><blockquote><p>go get github.com/astaxie/beego</p></blockquote><h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//注册驱动</span></span><br><span class="line">orm.RegisterDriver(<span class="string">"mysql"</span>, orm.DRMySQL)</span><br><span class="line"><span class="comment">//设置默认数据库</span></span><br><span class="line">orm.RegisterDataBase(<span class="string">"default"</span>, <span class="string">"mysql"</span>, <span class="string">"root:123456aA@tcp(127.0.0.1:8889)/test1?charset=utf8"</span>)</span><br><span class="line"><span class="comment">//注册定义的model</span></span><br><span class="line">orm.RegisterModel(<span class="built_in">new</span>(Userinfo))</span><br><span class="line"></span><br><span class="line"><span class="comment">//create table</span></span><br><span class="line">orm.RunSyncdb(<span class="string">"default"</span>, <span class="literal">false</span>, <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"github.com/astaxie/beego/orm"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//Model Struct</span></span><br><span class="line"><span class="keyword">type</span> Userinfo <span class="keyword">struct</span> &#123;</span><br><span class="line">Id <span class="keyword">int</span> <span class="string">`orm:"pk;column(uid)"`</span> <span class="comment">//设置主键</span></span><br><span class="line">Username <span class="keyword">string</span></span><br><span class="line">Department <span class="keyword">string</span></span><br><span class="line">Created <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//注册驱动</span></span><br><span class="line">orm.RegisterDriver(<span class="string">"mysql"</span>, orm.DRMySQL)</span><br><span class="line"><span class="comment">//设置默认数据库</span></span><br><span class="line">orm.RegisterDataBase(<span class="string">"default"</span>, <span class="string">"mysql"</span>, <span class="string">"root:123456aA@tcp(127.0.0.1:8889)/test1?charset=utf8"</span>)</span><br><span class="line"><span class="comment">//注册定义的model</span></span><br><span class="line">orm.RegisterModel(<span class="built_in">new</span>(Userinfo))</span><br><span class="line"></span><br><span class="line"><span class="comment">//create table</span></span><br><span class="line">orm.RunSyncdb(<span class="string">"default"</span>, <span class="literal">false</span>, <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestOrm</span><span class="params">()</span></span> &#123;</span><br><span class="line">o := orm.NewOrm() <span class="comment">//创建orm对象</span></span><br><span class="line"></span><br><span class="line">userinfo := Userinfo&#123;</span><br><span class="line">Username: <span class="string">"lizengcai"</span>,</span><br><span class="line">Department: <span class="string">"企划部"</span>,</span><br><span class="line">Created: time.Now().Format(<span class="string">"2006-01-02 15:04:05"</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//插入表</span></span><br><span class="line">o.Insert(&amp;userinfo)</span><br><span class="line"></span><br><span class="line"><span class="comment">//更新表</span></span><br><span class="line">userinfo.Id = <span class="number">8</span></span><br><span class="line">userinfo.Username = <span class="string">"anker"</span></span><br><span class="line">num, err := o.Update(&amp;userinfo, <span class="string">"username"</span>)</span><br><span class="line">fmt.Println(<span class="string">"Num:"</span>, num, <span class="string">"Err:"</span>,err)</span><br><span class="line"></span><br><span class="line"><span class="comment">//读取一行</span></span><br><span class="line">userinfo := Userinfo&#123;Id: <span class="number">8</span>&#125;</span><br><span class="line">o.Read(&amp;userinfo)</span><br><span class="line">fmt.Println(userinfo)</span><br><span class="line"></span><br><span class="line"><span class="comment">//按条件获取</span></span><br><span class="line"><span class="keyword">var</span> userinfoes []Userinfo</span><br><span class="line"></span><br><span class="line">qs := o.QueryTable(<span class="string">"userinfo"</span>)</span><br><span class="line">cond := orm.NewCondition()</span><br><span class="line">cond = cond.And(<span class="string">"username"</span>, <span class="string">"lizengcai"</span>)</span><br><span class="line">qs = qs.SetCond(cond)</span><br><span class="line">num,_ := qs.All(&amp;userinfoes)</span><br><span class="line">fmt.Println(num, userinfoes)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-main函数和init函数&quot;&gt;&lt;a href=&quot;#1-main函数和init函数&quot; class=&quot;headerlink&quot; title=&quot;1.main函数和init函数&quot;&gt;&lt;/a&gt;1.main函数和init函数&lt;/h3&gt;&lt;p&gt;简介:init函数能够在所有的pac
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>mongodb总结</title>
    <link href="http://yoursite.com/2018/08/12/mongodb%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2018/08/12/mongodb总结/</id>
    <published>2018-08-12T12:41:55.000Z</published>
    <updated>2018-08-13T06:44:24.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h3><p>mongodb是nosql中的一款产品，属于文档型数据库，存储的是文档（Bson,json的二进制化），内部引擎由javascript实现，所有和node.js搭配使用有天然的优势。</p><p>数据在存储时是以bson形式进行存储的，查询时数据转换为js对象，并可以通过js语法进行操作。<br>注意事项:</p><ul><li>MongoDB不支持事务和夺标连接将查询</li><li>MongoDB中键值对是有序的,相同的键值对,不同顺序,属于不同的文档</li><li>new Date(); 返回日期对象，属于日期类型，Date()函数返回日期字符串，在Shell中操作日期要使用日期类型， 日期类型是包含时区的</li></ul><h3 id="2-bin目录文件作用"><a href="#2-bin目录文件作用" class="headerlink" title="2.bin目录文件作用"></a>2.bin目录文件作用</h3><blockquote><p>bsondump: 导出bson结构（可视化转化）<br>mongodump: 整体导出bson数据<br>mongorestore: 导入bson<br>mongo: 客户端<br>mongod: 服务端<br>mongos: 查询路由，用于分片<br>mongoexport: 导出json,csv,tsv格式<br>mongoimport: 导入<br>bson: 导出bson结构<br>bsondump: 导出bson结构<br>bsondump: 导出bson结构</p></blockquote><h3 id="3-mongod参数说明"><a href="#3-mongod参数说明" class="headerlink" title="3.mongod参数说明"></a>3.mongod参数说明</h3><blockquote><p>–bind_ip 绑定固定ip<br>–bind_ip_all 绑定所有ip<br>–dbpath 数据库存储目录<br>–logpath log file to send write to instead of stdout - has to be a file, not directory<br>–port 指定端口，default 27017<br>–fork fork server process(后台demon运行)<br>–smallfiles 小空间运行<br>–directoryperdb each database will be stored in a separate directory(创建独立子目录)<br>–logappend 追加日志<br>–pidfilepath full path to pidfile,默认不创建<br>–keyFile 集群标识（授权使用）<br>–journal 启用日志<br>–maxConns 最大连接并发数<br>–notablescan 不允许表扫描<br>/bin/mongo dbaddress –port 17720 –eval “db.shutdownServer()”: 关闭服务</p></blockquote><h3 id="4-mongo参数说明"><a href="#4-mongo参数说明" class="headerlink" title="4.mongo参数说明"></a>4.mongo参数说明</h3><blockquote><p>–port/host 连接端口/主机<br>–eval 解析javascript<br>–username 用户名<br>–password 密码<br>–quit be less chatty<br>–shell 运行完文件进入shell</p></blockquote><h3 id="5-相关命令"><a href="#5-相关命令" class="headerlink" title="5.相关命令"></a>5.相关命令</h3><h4 id="5-1-DDL"><a href="#5-1-DDL" class="headerlink" title="5.1 DDL:"></a>5.1 DDL:</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">show dbs/databases: 显示数据库</span><br><span class="line">db.dropDatabase(): 删除所在数据库</span><br><span class="line"><span class="keyword">use</span> <span class="title">dbname</span>: 选库/隐式创建数据库</span><br><span class="line"><span class="title">show</span> <span class="title">tables</span>/<span class="title">collections</span>: 显示数据表</span><br><span class="line"><span class="title">db</span>.<span class="title">getName</span>(): 显示所在数据库名称</span><br><span class="line"><span class="title">db</span>.<span class="title">version</span>(): <span class="title">mongo</span>版本</span><br><span class="line"><span class="title">db</span>.<span class="title">hostInfo</span>(): 获取<span class="title">mongo</span>所在服务器主机信息</span><br><span class="line"><span class="title">db</span>.<span class="title">createCollection</span>(<span class="title">name</span>, &#123;<span class="title">size</span>, <span class="title">capped</span>, <span class="title">max</span>&#125;): 创建表</span><br><span class="line"><span class="title">db</span>.<span class="title">collectionName</span>.<span class="title">drop</span>(): 删除表</span><br><span class="line"><span class="title">db</span>.<span class="title">listCommands</span>(): 列出数据库命令</span><br><span class="line"><span class="title">print</span>("<span class="title">hello</span>"): 打印语句</span><br><span class="line"><span class="title">exit</span> 退出<span class="title">mongoClient</span></span><br></pre></td></tr></table></figure><h4 id="5-2-DQL"><a href="#5-2-DQL" class="headerlink" title="5.2 DQL:"></a>5.2 DQL:</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">db.collectionName.count(): 统计条数</span><br><span class="line">db.collectionName.find([query], [fields]).pretty(): 查看并美化所有数据</span><br><span class="line">db.collectionName.find(&#123;<span class="string">'a'</span>:<span class="string">'b'</span>&#125;): 条件查询</span><br><span class="line">db.collectionName.find(&#123;field:&#123;$lt:ISODate(<span class="string">'2018-08-05'</span>)&#125;&#125;)[.count()]: 小于<span class="number">2018</span><span class="number">-08</span><span class="number">-05</span>的数据[数量]</span><br><span class="line">例: db.collectionName.find(&#123;<span class="string">"age"</span>: &#123;$lt:<span class="number">20</span>&#125;&#125;) <span class="comment">//查询条件,相当于select * from collectionName where age &lt; 20</span></span><br><span class="line">db.collectionName.findOne([query], [fields], [options]): 查询一条,相当于select * from users limit <span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="5-3-DML"><a href="#5-3-DML" class="headerlink" title="5.3 DML:"></a>5.3 DML:</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db.collectionName.insert([&#123;<span class="string">'a'</span>: <span class="string">'b'</span>, <span class="string">'c'</span>: <span class="string">'d'</span>&#125;,&#123;&#125;]): 插入数据</span><br><span class="line">db.collectionName.insertOne(obj, &lt;optional&gt;): 插入单条</span><br><span class="line">db.collectionName.remove(&#123;query&#125;, <span class="keyword">true</span>): 条件删除[第一条数据]</span><br><span class="line">db.collectionName.remove(&#123;&#125;): 清空集合中所有的文档</span><br><span class="line">db.collectionName.save(obj): 集合中不包含id或者id在表中不存在则插入,存在则更新(整体替换)</span><br><span class="line">db.collectionName.update(query, obj, upsert bool): upsert为<span class="keyword">true</span>时,条件存在则更新,不存在则插入obj[此处不包括query插入]</span><br><span class="line">例子: </span><br><span class="line">db.users.find() <span class="comment">//&#123;"_id": 5, "username": "test10"&#125;</span></span><br><span class="line">db.users.update(&#123;<span class="string">"username"</span>:<span class="string">"test11"</span>&#125;, &#123;<span class="string">"_id"</span>: <span class="number">6</span>, <span class="string">"age"</span>: <span class="number">20</span>, <span class="string">"gender"</span>: <span class="number">1</span>&#125;, <span class="keyword">true</span>)</span><br><span class="line">db.users.find() <span class="comment">//&#123;"_id": 5, "username": "test10"&#125;, &#123;"_id": 6, "age": 20, "gender": 1&#125;</span></span><br></pre></td></tr></table></figure><h4 id="5-4-Help"><a href="#5-4-Help" class="headerlink" title="5.4 Help:"></a>5.4 Help:</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">db.help(): help on db methods</span><br><span class="line">db.collectionName.help(): help on collection methods</span><br><span class="line">sh.help(): sharding helpers</span><br><span class="line">rs.help(): replica set helpers</span><br><span class="line">help admin: administrative help</span><br><span class="line">help connect: connecting to a db help</span><br><span class="line">help keys: key shortcuts</span><br><span class="line">help misc: misc things to know</span><br><span class="line">help mr: mapreduce</span><br></pre></td></tr></table></figure><h3 id="6-修改器-操作符"><a href="#6-修改器-操作符" class="headerlink" title="6.修改器,操作符"></a>6.修改器,操作符</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$set（更新字段）</span><br><span class="line">$unset(删除字段)、</span><br><span class="line">$inc(自增或自减)</span><br><span class="line">$and、$or、$in、$nin、$nor、$exists（用于判断文档中是否包含某字段）</span><br><span class="line">$push(向数组中尾部添加一个元素)</span><br><span class="line">$pushAll(将数组中的所有值push)</span><br><span class="line">$addToSet（向set集合中添加元素）</span><br><span class="line">$pop(删除数组中的头部或尾部元素) </span><br><span class="line">$pull(删除数组中指定的值)</span><br><span class="line">$size（根据数组的长度进行筛选）</span><br><span class="line">$slice(返回数组中部分元素，如前几个、后几个、中间连续几个元素)</span><br><span class="line">$elemMatch(用于匹配数组中的多个条件)</span><br><span class="line">$where(自定义筛选条件，效率比较低，需要将bson转为js对象，不能使用索引，可以先使用普通查询过滤掉部分不满足条件</span><br></pre></td></tr></table></figure><h3 id="7-索引"><a href="#7-索引" class="headerlink" title="7.索引"></a>7.索引</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">db.collectionName.getIndexes(): 获取索引</span><br><span class="line">    [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"v"</span> : <span class="number">2</span>,</span><br><span class="line">            <span class="string">"key"</span> : &#123;</span><br><span class="line">                <span class="string">"_id"</span> : <span class="number">1</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"name"</span> : <span class="string">"_id_"</span>,</span><br><span class="line">            <span class="string">"ns"</span> : <span class="string">"h5maker.users"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">db.collectionName.ensureIndex(&#123;field : <span class="number">1</span>&#125;): <span class="comment">//添加索引</span></span><br><span class="line">db.collectionName.dropIndexes(): 删除collectionName上所有的索引</span><br><span class="line">db.collectionName.dropIndexes(&#123;name: <span class="number">1</span>&#125;): 删除collectionName上指定的索引</span><br></pre></td></tr></table></figure><center>未完待续…….</center>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-简介&quot;&gt;&lt;a href=&quot;#1-简介&quot; class=&quot;headerlink&quot; title=&quot;1.简介&quot;&gt;&lt;/a&gt;1.简介&lt;/h3&gt;&lt;p&gt;mongodb是nosql中的一款产品，属于文档型数据库，存储的是文档（Bson,json的二进制化），内部引擎由javas
      
    
    </summary>
    
      <category term="mongodb总结" scheme="http://yoursite.com/categories/mongodb%E6%80%BB%E7%BB%93/"/>
    
    
  </entry>
  
  <entry>
    <title>nginx总结</title>
    <link href="http://yoursite.com/2018/08/10/nginx%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2018/08/10/nginx总结/</id>
    <published>2018-08-10T08:53:33.000Z</published>
    <updated>2018-09-30T03:12:20.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-context-上下文"><a href="#1-context-上下文" class="headerlink" title="1.context:上下文"></a>1.context:上下文</h3><p>main context: events/http<br>server in http, location in server</p><h3 id="2-nginx与apache对比"><a href="#2-nginx与apache对比" class="headerlink" title="2.nginx与apache对比"></a>2.nginx与apache对比</h3><p>4G内存服务器+apache(prefork模式)一般只能处理3000个并发;<br>Nginx 0.8.15 + PHP 5.2.10 (FastCGI) 服务器在3万并发连接下，开启的10个Nginx进程消耗150M内存（15M * 10=150M），开启的64个php-cgi进程消耗1280M内存（20M * 64=1280M），加上系统自身消耗的内存，总共消耗不到2GB内存。如果服务器内存较小，完全可以只开启25个php-cgi进程，这样php-cgi消耗的总内存数才500M<br>关键是nginx在3万的并发下,仍然速度飞快,所以说同等环境下,nginx是apache连接并发数的10倍.</p><h3 id="3-nginx各种错误原因总结"><a href="#3-nginx各种错误原因总结" class="headerlink" title="3.nginx各种错误原因总结"></a>3.nginx各种错误原因总结</h3><p>502 Bad Gateway:</p><p><1> php-fpm后台死掉或没有开启;</1></p><h3 id="4-etc-init-d-nginx脚本"><a href="#4-etc-init-d-nginx脚本" class="headerlink" title="4. /etc/init.d/nginx脚本"></a>4. /etc/init.d/nginx脚本</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /bin/bash</span></span><br><span class="line"><span class="comment"># chkconfig: - 85 15</span></span><br><span class="line">PATH=/usr/local/openresty/nginx</span><br><span class="line">DESC=<span class="string">"nginx daemon"</span></span><br><span class="line">NAME=nginx</span><br><span class="line">DAEMON=$PATH/sbin/$NAME</span><br><span class="line">CONFIGFILE=$PATH/conf/$NAME.conf</span><br><span class="line">PIDFILE=$PATH/logs/$NAME.pid</span><br><span class="line">SCRIPTNAME=/etc/init.d/$NAME</span><br><span class="line">set -e</span><br><span class="line">[ -x <span class="string">"$DAEMON"</span> ] || <span class="keyword">exit</span> <span class="number">0</span></span><br><span class="line">do_start() &#123;</span><br><span class="line">$DAEMON -c $CONFIGFILE || <span class="keyword">echo</span> -n <span class="string">"nginx already running"</span></span><br><span class="line">&#125;</span><br><span class="line">do_stop() &#123;</span><br><span class="line">$DAEMON -s stop || <span class="keyword">echo</span> -n <span class="string">"nginx not running"</span></span><br><span class="line">&#125;</span><br><span class="line">do_reload() &#123;</span><br><span class="line">$DAEMON -s reload || <span class="keyword">echo</span> -n <span class="string">"nginx can't reload"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> <span class="string">"$1"</span> in</span><br><span class="line">start)</span><br><span class="line"><span class="keyword">echo</span> -n <span class="string">"Starting $DESC: $NAME"</span></span><br><span class="line">do_start</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"."</span></span><br><span class="line">;;</span><br><span class="line">stop)</span><br><span class="line"><span class="keyword">echo</span> -n <span class="string">"Stopping $DESC: $NAME"</span></span><br><span class="line">do_stop</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"."</span></span><br><span class="line">;;</span><br><span class="line">reload|graceful)</span><br><span class="line"><span class="keyword">echo</span> -n <span class="string">"Reloading $DESC configuration..."</span></span><br><span class="line">do_reload</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"."</span></span><br><span class="line">;;</span><br><span class="line">restart)</span><br><span class="line"><span class="keyword">echo</span> -n <span class="string">"Restarting $DESC: $NAME"</span></span><br><span class="line">do_stop</span><br><span class="line">do_start</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"."</span></span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"Usage: $SCRIPTNAME &#123;start|stop|reload|restart&#125;"</span> &gt;&amp;<span class="number">2</span></span><br><span class="line"><span class="keyword">exit</span> <span class="number">3</span></span><br><span class="line">;;</span><br><span class="line">esac</span><br><span class="line"><span class="keyword">exit</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><h3 id="5-nginx配置"><a href="#5-nginx配置" class="headerlink" title="5.nginx配置"></a>5.nginx配置</h3><h4 id="5-1-nginx-conf"><a href="#5-1-nginx-conf" class="headerlink" title="5.1 nginx.conf"></a>5.1 nginx.conf</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">user  www www;</span><br><span class="line">worker_processes  <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#error_log  logs/error.log;</span></span><br><span class="line"><span class="comment">#error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="comment">#error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#pid        logs/nginx.pid;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    <span class="keyword">include</span>       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">    <span class="comment">#                  '$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">    <span class="comment">#                  '"$http_user_agent" "$http_x_forwarded_for"';</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#access_log  logs/access.log  main;</span></span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    <span class="comment">#tcp_nopush     on;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#keepalive_timeout  0;</span></span><br><span class="line">    keepalive_timeout  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    upstream unix_tmp_php_cgi_sock &#123;  <span class="comment">#nginx负载均衡</span></span><br><span class="line">        server unix:/dev/shm/php5-fpm-www1.sock;</span><br><span class="line">        server unix:/dev/shm/php5-fpm-www2.sock;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">include</span> vhost<span class="comment">/*.conf;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        &#125;</span></span><br></pre></td></tr></table></figure><h4 id="5-2-vhost文件夹下server-conf"><a href="#5-2-vhost文件夹下server-conf" class="headerlink" title="5.2 vhost文件夹下server.conf"></a>5.2 vhost文件夹下server.conf</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       <span class="number">80</span>;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   /project/html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /<span class="number">50</span>x.html;</span><br><span class="line">        location = /<span class="number">50</span>x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">        server &#123;</span><br><span class="line">                listen <span class="number">8080</span>;</span><br><span class="line">                server_name localhost;</span><br><span class="line"></span><br><span class="line">                location / &#123;</span><br><span class="line">                        root /project/php;</span><br><span class="line">                        index index.html index.php;</span><br><span class="line">                &#125;</span><br><span class="line">                error_page <span class="number">500</span> <span class="number">503</span> <span class="number">504</span> /<span class="number">50</span>x.html;</span><br><span class="line">                location /<span class="number">50</span>x.html &#123;</span><br><span class="line">                        root /project/php;</span><br><span class="line">                &#125;</span><br><span class="line">                location ~ \.php &#123;</span><br><span class="line">                        root /project/php;</span><br><span class="line">                        fastcgi_pass unix_tmp_php_cgi_sock; <span class="comment">#通过socket连接(存在多个php-fpm线程池则填写负载名称)</span></span><br><span class="line">                        fastcgi_index index.php;</span><br><span class="line">                        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">                        <span class="keyword">include</span> fastcgi_params;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h3 id="6-配置解读"><a href="#6-配置解读" class="headerlink" title="6. 配置解读"></a>6. 配置解读</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置允许发布内容为8M(允许上传大小)</span></span><br><span class="line">client_max_body_size <span class="number">8</span>M;</span><br><span class="line">client_body_buffer_size <span class="number">128</span>k;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-context-上下文&quot;&gt;&lt;a href=&quot;#1-context-上下文&quot; class=&quot;headerlink&quot; title=&quot;1.context:上下文&quot;&gt;&lt;/a&gt;1.context:上下文&lt;/h3&gt;&lt;p&gt;main context: events/http&lt;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>计划及进度</title>
    <link href="http://yoursite.com/2018/07/18/%E8%AE%A1%E5%88%92%E5%8F%8A%E8%BF%9B%E5%BA%A6/"/>
    <id>http://yoursite.com/2018/07/18/计划及进度/</id>
    <published>2018-07-17T16:07:47.000Z</published>
    <updated>2018-07-27T05:32:31.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="计划及进度"><a href="#计划及进度" class="headerlink" title="计划及进度"></a>计划及进度</h3><h4 id="1-技术"><a href="#1-技术" class="headerlink" title="1.技术"></a>1.技术</h4><p><a href="https://www.ctolib.com/docs-go-web-programming-c-02-5.html" target="_blank" rel="noopener">go web编程</a><br>进度:</p><table><thead><tr><th style="text-align:center">计划</th><th style="text-align:center">子模块</th><th style="text-align:center">总体进度</th></tr></thead><tbody><tr><td style="text-align:center">面向对象</td><td style="text-align:center">复杂例子</td><td style="text-align:center">100%</td></tr><tr><td style="text-align:center">go基础</td><td style="text-align:center">零值</td><td style="text-align:center">100%</td></tr></tbody></table><p><a href="https://segmentfault.com/a/1190000009002895" target="_blank" rel="noopener">正则表达式1</a><br><a href="http://wiki.jikexueyuan.com/project/php/regular-expression.html" target="_blank" rel="noopener">正则表达式2</a></p><table><thead><tr><th style="text-align:center">计划</th><th style="text-align:center">子模块</th><th style="text-align:center">总体进度</th></tr></thead><tbody><tr><td style="text-align:center">例子分析</td><td style="text-align:center">http</td><td style="text-align:center">10%</td></tr></tbody></table><h4 id="2-贸易学习"><a href="#2-贸易学习" class="headerlink" title="2.贸易学习"></a>2.贸易学习</h4><h4 id="3-读书计划"><a href="#3-读书计划" class="headerlink" title="3.读书计划"></a>3.读书计划</h4><p>进度:</p><table><thead><tr><th style="text-align:center">计划</th><th style="text-align:center">子模块</th><th style="text-align:center">总体进度</th></tr></thead><tbody><tr><td style="text-align:center">挪威的森林</td><td style="text-align:center">绿子</td><td style="text-align:center">20%</td></tr></tbody></table><h3 id="任务"><a href="#任务" class="headerlink" title="任务"></a>任务</h3><h4 id="1-MHA"><a href="#1-MHA" class="headerlink" title="1.MHA"></a>1.<a href="https://www.cnblogs.com/gomysql/p/3675429.html" target="_blank" rel="noopener">MHA</a></h4><h4 id="2-nc的使用"><a href="#2-nc的使用" class="headerlink" title="2.nc的使用"></a>2.<a href="https://www.cnblogs.com/nmap/p/6148306.html" target="_blank" rel="noopener">nc的使用</a></h4><h4 id="3-redis-pipline"><a href="#3-redis-pipline" class="headerlink" title="3.redis pipline"></a>3.<a href="http://www.runoob.com/redis/redis-pipelining.html" target="_blank" rel="noopener">redis pipline</a></h4><h4 id="4-redis事物"><a href="#4-redis事物" class="headerlink" title="4.redis事物"></a>4.<a href="https://www.yiibai.com/redis/redis_transactions.html" target="_blank" rel="noopener">redis事物</a></h4><h4 id="5-redis各数据类型应用场景"><a href="#5-redis各数据类型应用场景" class="headerlink" title="5.redis各数据类型应用场景"></a>5.<a href="https://blog.csdn.net/xiaoliuliu2050/article/details/73250708" target="_blank" rel="noopener">redis各数据类型应用场景</a></h4><h4 id="6-redis分布式"><a href="#6-redis分布式" class="headerlink" title="6.redis分布式"></a>6.<a href="https://www.baidu.com/s?ie=UTF-8&amp;wd=redis%E5%88%86%E5%B8%83%E5%BC%8F" target="_blank" rel="noopener">redis分布式</a></h4><h4 id="7-廖雪峰git学习"><a href="#7-廖雪峰git学习" class="headerlink" title="7.廖雪峰git学习"></a>7.<a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013744142037508cf42e51debf49668810645e02887691000" target="_blank" rel="noopener">廖雪峰git学习</a></h4><h4 id="8-git-stash"><a href="#8-git-stash" class="headerlink" title="8.git stash"></a>8.<a href="https://www.cnblogs.com/tocy/p/git-stash-reference.html" target="_blank" rel="noopener">git stash</a></h4><h4 id="1-1beego系统学习"><a href="#1-1beego系统学习" class="headerlink" title="1.1beego系统学习"></a>1.1<a href="https://my.oschina.net/lockupme/blog/691402" target="_blank" rel="noopener">beego系统学习</a></h4><h4 id="1-2beego数据输出"><a href="#1-2beego数据输出" class="headerlink" title="1.2beego数据输出"></a>1.2<a href="https://www.cnblogs.com/arestrack/p/7799425.html" target="_blank" rel="noopener">beego数据输出</a></h4><h4 id="1-3项目及helper整理"><a href="#1-3项目及helper整理" class="headerlink" title="1.3项目及helper整理"></a>1.3<a href="https://www.zhihu.com/" target="_blank" rel="noopener">项目及helper整理</a></h4><h4 id="1-4redis安装"><a href="#1-4redis安装" class="headerlink" title="1.4redis安装"></a>1.4<a href="https://www.jianshu.com/p/10baa32b2cd9" target="_blank" rel="noopener">redis安装</a></h4><h4 id="1-4ansible中文文档"><a href="#1-4ansible中文文档" class="headerlink" title="1.4ansible中文文档"></a>1.4<a href="http://ansible-tran.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener">ansible中文文档</a></h4>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;计划及进度&quot;&gt;&lt;a href=&quot;#计划及进度&quot; class=&quot;headerlink&quot; title=&quot;计划及进度&quot;&gt;&lt;/a&gt;计划及进度&lt;/h3&gt;&lt;h4 id=&quot;1-技术&quot;&gt;&lt;a href=&quot;#1-技术&quot; class=&quot;headerlink&quot; title=&quot;1.技术&quot;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>go总结</title>
    <link href="http://yoursite.com/2018/07/17/go%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2018/07/17/go总结/</id>
    <published>2018-07-17T09:13:46.000Z</published>
    <updated>2018-07-30T06:28:24.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-类型"><a href="#1-类型" class="headerlink" title="1. 类型:"></a>1. 类型:</h3><h4 id="1-1-类型分类"><a href="#1-1-类型分类" class="headerlink" title="1.1 类型分类:"></a>1.1 类型分类:</h4><ul><li>基本类型:int,float,bool,string;</li><li>结构化(复合的)类型:struct,array,slice,map,channel</li><li>描述类型分行为:interface</li><li>type自定义类型:type IZ int ;var a IZ = 5<ul><li>type定义多自定义类型:<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type (</span><br><span class="line">IZ int</span><br><span class="line">FZ fload64</span><br><span class="line">STR string</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="1-2-类型转换"><a href="#1-2-类型转换" class="headerlink" title="1.2 类型转换"></a>1.2 类型转换</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int(),float(),bool()</span><br><span class="line">[]byte() <span class="comment">//字符串转[]byte</span></span><br></pre></td></tr></table></figure><h4 id="1-3-常量与变量"><a href="#1-3-常量与变量" class="headerlink" title="1.3 常量与变量"></a>1.3 常量与变量</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="number">1</span>&gt;常量: <span class="keyword">const</span> identifier [type] = value</span><br><span class="line"><span class="keyword">const</span> b [string] = <span class="string">"abc"</span></span><br><span class="line">定义多常量:</span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">Thursday, Friday, Saturday = <span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span></span><br><span class="line">)</span><br><span class="line">&lt;<span class="number">2</span>&gt;变量:</span><br><span class="line"><span class="keyword">var</span> identifier [type] = value</span><br><span class="line"><span class="keyword">var</span> a, b *int</span><br><span class="line"><span class="keyword">var</span> a int = <span class="number">15</span></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">5</span></span><br><span class="line">定义多变量:</span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">a int</span><br><span class="line">b bool</span><br><span class="line">str string</span><br><span class="line">c = <span class="keyword">false</span></span><br><span class="line">d = <span class="string">"Go says hello to the world"</span></span><br><span class="line">)</span><br><span class="line">当变量被声明时,会自动赋予零值:</span><br><span class="line">float:<span class="number">0.0</span></span><br><span class="line">bool:<span class="keyword">false</span></span><br><span class="line">指针: nil</span><br></pre></td></tr></table></figure><h4 id="1-4-map-数组-切片与结构体"><a href="#1-4-map-数组-切片与结构体" class="headerlink" title="1.4 map,数组,切片与结构体"></a>1.4 map,数组,切片与结构体</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="number">7</span>&gt;map类型:</span><br><span class="line">声明:</span><br><span class="line"><span class="keyword">var</span> identifier map[keytype]valuetype</span><br><span class="line">例:</span><br><span class="line"><span class="keyword">var</span> mp1 map[string]int <span class="comment">//这种方式在使用时需make()</span></span><br><span class="line">或者:</span><br><span class="line">mp2 := map[string]float32&#123;<span class="string">"C"</span>:<span class="number">5</span>, <span class="string">"Go"</span>:<span class="number">4.5</span>, <span class="string">"Python"</span>:<span class="number">4.5</span>, <span class="string">"C++"</span>:<span class="number">2</span>&#125;</span><br><span class="line">&lt;<span class="number">8</span>&gt;数组与切片[数组可以视为键为数字的map]:</span><br><span class="line">数组声明:</span><br><span class="line"><span class="keyword">var</span> identifier [len]type</span><br><span class="line">例:</span><br><span class="line"><span class="keyword">var</span> arr1 [<span class="number">5</span>]int</span><br><span class="line">切片声明:</span><br><span class="line">    <span class="keyword">var</span> identifier []type</span><br><span class="line">例:</span><br><span class="line">    arr := [<span class="number">10</span>]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line">    sli := [:] <span class="comment">//取出所有值</span></span><br><span class="line">    或者: sli := []int&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line">&lt;<span class="number">9</span>&gt;结构体:</span><br><span class="line">声明:</span><br><span class="line">type identifier struct &#123;</span><br><span class="line">field1 type1</span><br><span class="line">field2 type2</span><br><span class="line">.......</span><br><span class="line">&#125;</span><br><span class="line">赋值:</span><br><span class="line"><span class="keyword">var</span> i identifier</span><br><span class="line">i.field1 = int</span><br><span class="line">i.field2 = <span class="string">"string"</span></span><br><span class="line">注:此时的t是类型main.identifier</span><br><span class="line">指向结构体的指针:</span><br><span class="line"><span class="number">1</span>&gt;<span class="keyword">var</span> t *identifier</span><br><span class="line">t = <span class="keyword">new</span>(identifier) </span><br><span class="line"><span class="number">2</span>&gt;通常使用: t := <span class="keyword">new</span>(identifier)</span><br><span class="line">   t.field1 = <span class="number">10</span></span><br><span class="line">   t.field2 = <span class="number">12.3</span></span><br><span class="line"><span class="number">3</span>&gt;指针赋值: t := &amp;identifier&#123;<span class="number">10</span>, <span class="number">12.3</span>&#125;</span><br><span class="line">举例:</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line"><span class="string">"strings"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type Person struct&#123;</span><br><span class="line">firstName, lastName string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func upPerson(p *Person) &#123;</span><br><span class="line">p.firstName = strings.ToUpper(p.firstName)</span><br><span class="line">p.lastName = strings.ToUpper(p.lastName)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line"><span class="comment">//1-struct as a value type:</span></span><br><span class="line"><span class="keyword">var</span> pers1 Person</span><br><span class="line">pers1.firstName = <span class="string">"Chris"</span></span><br><span class="line">pers1.lastName = <span class="string">"Woodward"</span></span><br><span class="line">upPerson(&amp;pers1)</span><br><span class="line">fmt.Printf(<span class="string">"%s,%s\n"</span>, pers1.firstName, pers1.lastName)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2-struct as a pointer:</span></span><br><span class="line">pers2 := <span class="keyword">new</span>(Person)</span><br><span class="line">pers2.firstName = <span class="string">"Chris"</span></span><br><span class="line">pers2.lastName = <span class="string">"Woodward"</span></span><br><span class="line">(*pers2).lastName = <span class="string">"Li"</span></span><br><span class="line">upPerson(pers2)</span><br><span class="line">fmt.Printf(<span class="string">"%s,%s\n"</span>, pers2.firstName, pers2.lastName)</span><br><span class="line"></span><br><span class="line"><span class="comment">//3-struct as a literal</span></span><br><span class="line">pers3 := &amp;Person&#123;<span class="string">"Chris"</span>, <span class="string">"Woodward"</span>&#125;</span><br><span class="line">upPerson(pers3)</span><br><span class="line">fmt.Printf(<span class="string">"%s,%s"</span>,pers3.firstName, pers3.lastName)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-5-byte和rune"><a href="#1-5-byte和rune" class="headerlink" title="1.5 byte和rune"></a>1.5 byte和rune</h4><p>Go语言中byte和rune实质上就是uint8和int32类型。byte用来强调数据是raw data，而不是数字；而rune用来表示Unicode的code point。参考规范：</p><blockquote><p>uint8       the set of all unsigned  8-bit integers (0 to 255)<br>int32       the set of all signed 32-bit integers (-2147483648 to 2147483647)<br>byte        alias for uint8<br>rune        alias for int32</p></blockquote><p>可以通过下面程序验证：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line">func byteSlience(b []byte) []byte &#123;</span><br><span class="line"><span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func runeSlience(r []rune) []rune &#123;</span><br><span class="line"><span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line">type Color byte</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">b := []byte&#123;<span class="number">0</span>,<span class="number">1</span>&#125;</span><br><span class="line">u8 := []uint8&#123;<span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%T,%T\n"</span>, b, u8)</span><br><span class="line">fmt.Println(byteSlience(b))</span><br><span class="line">fmt.Println(byteSlience(u8))</span><br><span class="line"></span><br><span class="line">r := []rune&#123;<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">i32 := []int32&#123;<span class="number">6</span>,<span class="number">7</span>&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%T,%T\n"</span>, r, i32)</span><br><span class="line">fmt.Println(runeSlience(r))</span><br><span class="line">fmt.Println(runeSlience(i32))</span><br><span class="line"></span><br><span class="line">c := Color(<span class="number">3</span>)</span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, c)</span><br><span class="line">fmt.Println(c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果如下:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[]uint8,[]uint8</span><br><span class="line">[<span class="number">0</span> <span class="number">1</span>]</span><br><span class="line">[<span class="number">2</span> <span class="number">3</span>]</span><br><span class="line">[]int32,[]int32</span><br><span class="line">[<span class="number">4</span> <span class="number">5</span>]</span><br><span class="line">[<span class="number">6</span> <span class="number">7</span>]</span><br><span class="line">main.Color</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure><h3 id="2-sprintf的使用"><a href="#2-sprintf的使用" class="headerlink" title="2. sprintf的使用"></a>2. sprintf的使用</h3><h4 id="2-1-定义示例类型和变量"><a href="#2-1-定义示例类型和变量" class="headerlink" title="2.1 定义示例类型和变量"></a>2.1 定义示例类型和变量</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Human struct &#123;</span><br><span class="line">Name string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> people = Human&#123;Name:<span class="string">"zhangsan"</span>&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-普通占位符"><a href="#2-2-普通占位符" class="headerlink" title="2.2 普通占位符"></a>2.2 普通占位符</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">占位符     说明                           举例                   输出</span><br><span class="line">%v      相应值的默认格式。            Printf(<span class="string">"%v"</span>, people)   &#123;zhangsan&#125;，</span><br><span class="line">%+v     打印结构体时，会添加字段名     Printf(<span class="string">"%+v"</span>, people)  &#123;Name:zhangsan&#125;</span><br><span class="line">%<span class="comment">#v     相应值的Go语法表示            Printf("#v", people)   main.Human&#123;Name:"zhangsan"&#125;</span></span><br><span class="line">%T      相应值的类型的Go语法表示       Printf(<span class="string">"%T"</span>, people)   main.Human</span><br><span class="line">%%      字面上的百分号，并非值的占位符  Printf(<span class="string">"%%"</span>)            %</span><br></pre></td></tr></table></figure><h4 id="2-3-布尔占位符"><a href="#2-3-布尔占位符" class="headerlink" title="2.3 布尔占位符"></a>2.3 布尔占位符</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">占位符       说明                举例                     输出</span><br><span class="line">%t          <span class="keyword">true</span> 或 <span class="keyword">false</span>。     Printf(<span class="string">"%t"</span>, <span class="keyword">true</span>)       <span class="keyword">true</span></span><br></pre></td></tr></table></figure><h4 id="2-4-整数占位符"><a href="#2-4-整数占位符" class="headerlink" title="2.4 整数占位符"></a>2.4 整数占位符</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">占位符     说明                                  举例                       输出</span><br><span class="line">%b      二进制表示                             Printf(<span class="string">"%b"</span>, <span class="number">5</span>)             <span class="number">101</span></span><br><span class="line">%c      相应Unicode码点所表示的字符              Printf(<span class="string">"%c"</span>, <span class="number">0x4E2D</span>)        中</span><br><span class="line">%d      十进制表示                             Printf(<span class="string">"%d"</span>, <span class="number">0x12</span>)          <span class="number">18</span></span><br><span class="line">%o      八进制表示                             Printf(<span class="string">"%d"</span>, <span class="number">10</span>)            <span class="number">12</span></span><br><span class="line">%q      单引号围绕的字符字面值，由Go语法安全地转义 Printf(<span class="string">"%q"</span>, <span class="number">0x4E2D</span>)        <span class="string">'中'</span></span><br><span class="line">%x      十六进制表示，字母形式为小写 a-f         Printf(<span class="string">"%x"</span>, <span class="number">13</span>)             d</span><br><span class="line">%X      十六进制表示，字母形式为大写 A-F         Printf(<span class="string">"%x"</span>, <span class="number">13</span>)             D</span><br><span class="line">%U      Unicode格式：U+<span class="number">1234</span>，等同于 <span class="string">"U+%04X"</span>   Printf(<span class="string">"%U"</span>, <span class="number">0x4E2D</span>)         U+<span class="number">4E2</span>D</span><br></pre></td></tr></table></figure><h4 id="2-5-浮点数和复数的组成部分（实部和虚部）"><a href="#2-5-浮点数和复数的组成部分（实部和虚部）" class="headerlink" title="2.5 浮点数和复数的组成部分（实部和虚部）"></a>2.5 浮点数和复数的组成部分（实部和虚部）</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">占位符     说明                              举例            输出</span><br><span class="line">%b      无小数部分的，指数为二的幂的科学计数法，</span><br><span class="line">        与 strconv.FormatFloat 的 <span class="string">'b'</span> 转换格式一致。例如 <span class="number">-123456</span>p<span class="number">-78</span></span><br><span class="line">%e      科学计数法，例如 <span class="number">-1234.456e+78</span>        Printf(<span class="string">"%e"</span>, <span class="number">10.2</span>)     <span class="number">1.020000e+01</span></span><br><span class="line">%E      科学计数法，例如 <span class="number">-1234.456E+78</span>        Printf(<span class="string">"%e"</span>, <span class="number">10.2</span>)     <span class="number">1.020000E+01</span></span><br><span class="line">%f      有小数点而无指数，例如 <span class="number">123.456</span>        Printf(<span class="string">"%f"</span>, <span class="number">10.2</span>)     <span class="number">10.200000</span></span><br><span class="line">%g      根据情况选择 %e 或 %f 以产生更紧凑的（无末尾的<span class="number">0</span>）输出 Printf(<span class="string">"%g"</span>, <span class="number">10.20</span>)   <span class="number">10.2</span></span><br><span class="line">%G      根据情况选择 %E 或 %f 以产生更紧凑的（无末尾的<span class="number">0</span>）输出 Printf(<span class="string">"%G"</span>, <span class="number">10.20</span>+<span class="number">2</span>i) (<span class="number">10.2</span>+<span class="number">2</span>i)</span><br></pre></td></tr></table></figure><h4 id="2-6-字符串和字节切片"><a href="#2-6-字符串和字节切片" class="headerlink" title="2.6 字符串和字节切片"></a>2.6 字符串和字节切片</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">占位符     说明                              举例                           输出</span><br><span class="line">%s      输出字符串表示（string类型或[]byte)   Printf(<span class="string">"%s"</span>, []byte(<span class="string">"Go语言"</span>))  Go语言</span><br><span class="line">%q      双引号围绕的字符串，由Go语法安全地转义  Printf(<span class="string">"%q"</span>, <span class="string">"Go语言"</span>)         <span class="string">"Go语言"</span></span><br><span class="line">%x      十六进制，小写字母，每字节两个字符      Printf(<span class="string">"%x"</span>, <span class="string">"golang"</span>)         <span class="number">676</span>f6c616e67</span><br><span class="line">%X      十六进制，大写字母，每字节两个字符      Printf(<span class="string">"%X"</span>, <span class="string">"golang"</span>)         <span class="number">676</span>F6C616E67</span><br></pre></td></tr></table></figure><h4 id="2-7-指针"><a href="#2-7-指针" class="headerlink" title="2.7 指针"></a>2.7 指针</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">占位符         说明                      举例                             输出</span><br><span class="line">%p      十六进制表示，前缀 <span class="number">0</span>x          Printf(<span class="string">"%p"</span>, &amp;people)             <span class="number">0x4f57f0</span></span><br></pre></td></tr></table></figure><h4 id="2-8-其他标记"><a href="#2-8-其他标记" class="headerlink" title="2.8 其他标记"></a>2.8 其他标记</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">占位符      说明                             举例          输出</span><br><span class="line">+      总打印数值的正负号；对于%q（%+q）保证只输出ASCII编码的字符。 </span><br><span class="line">                                           Printf(<span class="string">"%+q"</span>, <span class="string">"中文"</span>)  <span class="string">"\u4e2d\u6587"</span></span><br><span class="line">-      在右侧而非左侧填充空格（左对齐该区域）</span><br><span class="line"><span class="comment">#      备用格式：为八进制添加前导 0（%#o）      Printf("%#U", '中')      U+4E2D</span></span><br><span class="line">       为十六进制添加前导 <span class="number">0</span>x（%<span class="comment">#x）或 0X（%#X），为 %p（%#p）去掉前导 0x；</span></span><br><span class="line">       如果可能的话，%q（%<span class="comment">#q）会打印原始 （即反引号围绕的）字符串；</span></span><br><span class="line">       如果是可打印字符，%U（%<span class="comment">#U）会写出该字符的</span></span><br><span class="line">       Unicode 编码形式（如字符 x 会被打印成 U+<span class="number">0078</span> <span class="string">'x'</span>）。</span><br><span class="line"><span class="string">' '</span>    (空格)为数值中省略的正负号留出空白（% d）；</span><br><span class="line">       以十六进制（% x, % X）打印字符串或切片时，在字节之间用空格隔开</span><br><span class="line"><span class="number">0</span>      填充前导的<span class="number">0</span>而非空格；对于数字，这会将填充移到正负号之后</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-类型&quot;&gt;&lt;a href=&quot;#1-类型&quot; class=&quot;headerlink&quot; title=&quot;1. 类型:&quot;&gt;&lt;/a&gt;1. 类型:&lt;/h3&gt;&lt;h4 id=&quot;1-1-类型分类&quot;&gt;&lt;a href=&quot;#1-1-类型分类&quot; class=&quot;headerlink&quot; titl
      
    
    </summary>
    
    
  </entry>
  
</feed>
